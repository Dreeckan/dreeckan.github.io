(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{434:function(t,s,a){"use strict";a.r(s);var e=a(31),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"les-traductions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#les-traductions"}},[t._v("#")]),t._v(" Les traductions")]),t._v(" "),a("p",[t._v("La "),a("a",{attrs:{href:"https://symfony.com/doc/current/translation.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("documentation officielle sur les traductions"),a("OutboundLink")],1),t._v(" et "),a("a",{attrs:{href:"https://symfony.com/doc/current/the-fast-track/en/28-intl.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("la Fast-Track de Symfony"),a("OutboundLink")],1),t._v("\nNous allons directement utiliser "),a("a",{attrs:{href:"https://symfony.com/doc/current/translation/message_format.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("le format ICU pour gérer les paramètres et les pluriels"),a("OutboundLink")],1),t._v(", dans nos traductions")]),t._v(" "),a("div",{staticStyle:{position:"relative","padding-bottom":"56.25%",height:"0"}},[a("iframe",{staticStyle:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"},attrs:{src:"https://www.loom.com/embed/9c40d518fead4ceab470b37c718f80f7",frameborder:"0",webkitallowfullscreen:"",mozallowfullscreen:"",allowfullscreen:""}})]),t._v(" "),a("p",[t._v("Pour utiliser un site en plusieurs langues, il va falloir gérer les traductions de notre site. Même si notre site n'a qu'une seule langue, il est fortement conseillé de toujours utiliser des fichiers de traduction pour gérer les textes, afin d'en permettre l'évolution bien plus facilement.")]),t._v(" "),a("h2",{attrs:{id:"en-resume"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#en-resume"}},[t._v("#")]),t._v(" En résumé")]),t._v(" "),a("ul",[a("li",[t._v("Les traductions se trouvent dans le dossier "),a("code",[t._v("translations")]),t._v(" du projet")]),t._v(" "),a("li",[t._v("Les fichiers "),a("code",[t._v("Yaml")]),t._v(" portent des noms comme "),a("code",[t._v("front.fr.yaml")]),t._v(" où "),a("code",[t._v("front")]),t._v(" est appelé un domaine et où "),a("code",[t._v("fr")]),t._v(" peut être remplacé par une autre langue")]),t._v(" "),a("li",[t._v("On peut traduire une chaine de caractères de différentes façons :\n"),a("ul",[a("li",[t._v("en appelant la méthode "),a("code",[t._v("trans('unTexteOuUneChaine', [], 'unDomaine')")]),t._v(" du service "),a("code",[t._v("Symfony\\Contracts\\Translation\\TranslatorInterface")])]),t._v(" "),a("li",[t._v("en appelant le filtre "),a("code",[t._v("'unTexteOuUneChaine'|trans({}, 'unDomaine')")]),t._v(" dans une vue Twig")])])])]),t._v(" "),a("h2",{attrs:{id:"configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configuration"}},[t._v("#")]),t._v(" Configuration")]),t._v(" "),a("p",[t._v("La configuration de base (dans "),a("code",[t._v("config/packages/translation.yaml")]),t._v(")")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("framework")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("default_locale")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fr'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Défini la langue par défaut du site (ici en français)")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("translator")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("default_path")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'%kernel.project_dir%/translations'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Défini où se trouve les traductions")]),t._v("\n")])])]),a("h2",{attrs:{id:"utilisation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#utilisation"}},[t._v("#")]),t._v(" Utilisation")]),t._v(" "),a("p",[t._v("Un exemple dans un controller (on récupère le service de traduction et on lui demande de traduire un texte) :")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("Symfony"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Contracts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Translation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("TranslatorInterface")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// On injecte le service de traduction")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("index")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name type-declaration"}},[t._v("TranslatorInterface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$translator")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// On lui demande de récupérer la traduction du texte text.test.")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Par défaut, il va la chercher dans le fichier messages.fr.yaml.")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Noter le nom étrange et revenons-y dans un instant")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$translated")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$translator")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("trans")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'text.test'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Un exemple d'appel de la même traduction dans un fichier "),a("code",[t._v("twig")]),t._v(" :")]),t._v(" "),a("div",{staticClass:"language-twig extra-class"},[a("pre",{pre:!0,attrs:{class:"language-twig"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token ld"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{{")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("text.test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("trans")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token rd"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}}")])])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("{# Ici, c'est le filtre trans qui fait le travail d'appeler le translator et d'aller chercher la traduction #}")]),t._v("\n")])])]),a("p",[t._v("Regardons le contenu de "),a("code",[t._v("translations/messages.fr.yaml")]),t._v(" (ou "),a("code",[t._v("translations/messages+intl-icu.fr.yaml")]),t._v(" si vous utilisez le format ICU) :")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("text")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Ceci est un texte de test.\n")])])]),a("p",[t._v("Regardons le contenu de "),a("code",[t._v("translations/messages.en.yaml")]),t._v(" (ou "),a("code",[t._v("translations/messages+intl-icu.en.yaml")]),t._v(" si vous utilisez le format ICU) :")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("text")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" This is a test text.\n")])])]),a("p",[t._v("Ce que fait le translator ici :")]),t._v(" "),a("ul",[a("li",[t._v("Il récupère la langue de l'utilisateur (qui est dans la requête http / la session)")]),t._v(" "),a("li",[t._v("Il ouvre le fichier de traduction correspondant")]),t._v(" "),a("li",[t._v("Il trouve la traduction")])]),t._v(" "),a("p",[t._v("Dans cet exemple, j'utilise une clé de traduction, afin de ranger / organiser mes traductions. J'aurais aussi pu utiliser un texte quelconque à traduire, mais je préfère ces formats plus condensés et qui me permettent de grouper mes traductions.")]),t._v(" "),a("h2",{attrs:{id:"les-domaines"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#les-domaines"}},[t._v("#")]),t._v(" Les domaines")]),t._v(" "),a("p",[t._v("Pour l'instant, toutes les traductions que vous entrez doivent se trouver dans le fichier "),a("code",[t._v("messages.*.yaml")]),t._v(". Idéalement, surtout si votre site prend de l'ampleur et que vous commencez à avoir beaucoup de textes, il est fortement recommandé d'utiliser plusieurs fichiers, selon les fonctionnalités (un fichier pour l'administration, un pour la validation des formulaires, etc.). Le découpage est à votre discrétion.")]),t._v(" "),a("p",[t._v("Ce que l'on appelle un domaine de traduction est en fait un fichier (comme "),a("code",[t._v("messages")]),t._v(") pour chacune des langues.")]),t._v(" "),a("p",[t._v("Pour gérer cela (imaginons que nous ayons un fichier "),a("code",[t._v("text.fr.yaml")]),t._v(") et appeler un fichier / domaine précis :")]),t._v(" "),a("p",[t._v("Un exemple dans un controller (on récupère le service de traduction et on lui demande de traduire un texte) :")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("Symfony"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Contracts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Translation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("TranslatorInterface")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// On injecte le service de traduction")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("index")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name type-declaration"}},[t._v("TranslatorInterface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$translator")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$translated")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$translator")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("trans")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'text.test'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'text'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Un exemple d'appel de la même traduction dans un fichier "),a("code",[t._v("twig")]),t._v(" :")]),t._v(" "),a("div",{staticClass:"language-twig extra-class"},[a("pre",{pre:!0,attrs:{class:"language-twig"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token ld"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{{")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("text.test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("trans")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token rd"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}}")])])]),t._v("\n")])])]),a("h2",{attrs:{id:"les-parametres"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#les-parametres"}},[t._v("#")]),t._v(" Les paramètres")]),t._v(" "),a("h3",{attrs:{id:"format-icu"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#format-icu"}},[t._v("#")]),t._v(" Format ICU")]),t._v(" "),a("p",[t._v("Ce format a été intégré à Symfony relativement récemment et tous les projets ne l'utilisent pas forcément.")]),t._v(" "),a("p",[t._v("Imaginons que dans un texte, je veuille passer un paramètre (la date du jour par exemple). Dans mon fichier "),a("code",[t._v("translations/messages+intl-icu.fr.yaml")]),t._v(" j'aurais :")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("text")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Nous sommes le "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Et dans l'appel de ma traduction (en Twig) :")]),t._v(" "),a("div",{staticClass:"language-twig extra-class"},[a("pre",{pre:!0,attrs:{class:"language-twig"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token ld"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{{")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("text.test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("trans")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("now"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("d/m/Y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token rd"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}}")])])]),t._v("\n")])])]),a("h3",{attrs:{id:"format-classique"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#format-classique"}},[t._v("#")]),t._v(' Format "classique"')]),t._v(" "),a("p",[a("code",[t._v("translations/messages.fr.yaml")]),t._v(" :")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("text")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Nous sommes le %date%\n")])])]),a("p",[t._v("Et dans l'appel de ma traduction (en Twig) :")]),t._v(" "),a("div",{staticClass:"language-twig extra-class"},[a("pre",{pre:!0,attrs:{class:"language-twig"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token ld"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{{")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("text.test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("trans")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("%date%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("now"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("d/m/Y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token rd"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}}")])])]),t._v("\n")])])]),a("h2",{attrs:{id:"gestion-des-pluriels-et-autres-conditions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gestion-des-pluriels-et-autres-conditions"}},[t._v("#")]),t._v(" Gestion des pluriels (et autres conditions)")]),t._v(" "),a("p",[t._v("Je ne vais parler ici que de la méthode avec ICU, plus pratique et plus lisible, même si sa syntaxe est assez particulière.\nL'avantage de cette syntaxe est qu'elle se rapproche d'un "),a("code",[t._v("switch")]),t._v(" en PHP, prenant une variable et en regardant la valeur pour définir la traduction à choisir.")]),t._v(" "),a("p",[t._v("Prenons un exemple avec des pluriels :")]),t._v(" "),a("p",[t._v("Dans "),a("code",[t._v("translations/messages+intl-icu.fr.yaml")])]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("num_of_apples")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("apples"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" plural"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        =0    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Il n'y a pas de pommes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        one   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Il y a une pomme"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        other "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Il y a "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# pommes !}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[a("code",[t._v("apples, plural")]),t._v(" définissent qu'on utilise le paramètre "),a("code",[t._v("apples")]),t._v(" et que l'on va utiliser la fonction "),a("code",[t._v("plural")]),t._v(" (qu'on gère des pluriels, en somme 😉 )")]),t._v(" "),a("li",[a("code",[t._v("=0 {Il n'y a pas de pommes}")]),t._v(" dit que si "),a("code",[t._v("apples")]),t._v(" est égale à 0, on appelle le texte dans les accolades")]),t._v(" "),a("li",[a("code",[t._v("one {Il y a une pomme...}")]),t._v(" dit que si "),a("code",[t._v("apples")]),t._v(" est égale à 1, on appelle le texte dans les accolades")]),t._v(" "),a("li",[a("code",[t._v("other {Il y a # pommes !}")]),t._v(" si les deux conditions précédentes ne sont pas vraies, on appelle le texte dans les accolades. Le "),a("code",[t._v("#")]),t._v(" dans les accolades sera remplacé par la valeur de "),a("code",[t._v("apples")]),t._v(".")])]),t._v(" "),a("p",[t._v("Un appel de cette traduction :")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$translator")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("trans")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'num_of_apples'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'apples'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Il y a 23 pommes !")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$translator")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("trans")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'num_of_apples'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'apples'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Il y a une pomme...")]),t._v("\n")])])]),a("p",[t._v("Cette notation peut également servir pour utiliser des conditions. Prenons cet exemple :")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$translator")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("trans")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'text.test'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'style'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'Rock'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'like'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'yes'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$translator")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("trans")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'text.test'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'style'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'Jazz'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'like'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'not_applicable'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("text")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("like"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" select"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            yes   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("J'aime le "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token tag"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            no    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Je n'aime pas spécialement le "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token tag"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            other "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Pas d'avis sur le "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token tag"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[a("code",[t._v("like, select,")]),t._v(" : "),a("code",[t._v("like")]),t._v(" va utiliser le paramètre "),a("code",[t._v("like")]),t._v(" passé par le PHP et "),a("code",[t._v("select")]),t._v("est la fonction utilisée (on va regarder directement la correspondance / l'égalité entre "),a("code",[t._v("like")]),t._v(" et les valeurs en dessous)")]),t._v(" "),a("li",[a("code",[t._v("yes")]),t._v(" : si "),a("code",[t._v("like")]),t._v(" vaut "),a("code",[t._v("yes")]),t._v(", alors on affiche notre amour pour un style musical (passé en paramètre)")]),t._v(" "),a("li",[a("code",[t._v("no")]),t._v(" : si "),a("code",[t._v("like")]),t._v(" vaut "),a("code",[t._v("no")]),t._v(", alors on affiche notre désamour pour un style musical (passé en paramètre)")]),t._v(" "),a("li",[a("code",[t._v("other")]),t._v(" : si "),a("code",[t._v("like")]),t._v(" vaut "),a("code",[t._v("no")]),t._v(", alors on affiche notre manque d'avis pour un style musical (passé en paramètre)")])]),t._v(" "),a("h2",{attrs:{id:"dans-les-formulaires"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dans-les-formulaires"}},[t._v("#")]),t._v(" Dans les formulaires")]),t._v(" "),a("p",[t._v("Dans la configuration des formulaires, les labels sont directement traduits et vous pouvez configurer quelques éléments supplémentaires :")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name-definition class-name"}},[t._v("TestType")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AbstractType")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("buildForm")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name type-declaration"}},[t._v("FormBuilderInterface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$builder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword type-hint"}},[t._v("array")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$options")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword return-type"}},[t._v("void")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$builder")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'test'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("TextType")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// On peut donner une clé de traduction pour le label")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'label'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'user.form.password'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("configureOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name type-declaration"}},[t._v("OptionsResolver")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$resolver")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword return-type"}},[t._v("void")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$resolver")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setDefaults")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// on définit le fichier de traduction à utiliser")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'translation_domain'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'front'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"traduire-les-textes-en-bdd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#traduire-les-textes-en-bdd"}},[t._v("#")]),t._v(" Traduire les textes en BdD")]),t._v(" "),a("p",[t._v("Pour simplifier le travail de traduction des données en "),a("abbr",{attrs:{title:"Base de Données"}},[t._v("BdD")]),t._v(", plusieurs bundles sont disponibles :")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://symfony.com/bundles/StofDoctrineExtensionsBundle/current/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("StofDoctrineExtensionsBundle"),a("OutboundLink")],1),t._v(" permet d'"),a("a",{attrs:{href:"https://github.com/doctrine-extensions/DoctrineExtensions/blob/main/doc/translatable.md#setup-and-autoloading",target:"_blank",rel:"noopener noreferrer"}},[t._v("ajouter un comportement "),a("code",[t._v("Translatable")]),a("OutboundLink")],1),t._v(" pour ajouter les champs à traduire dans vos entités")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/a2lix/TranslationFormBundle",target:"_blank",rel:"noopener noreferrer"}},[t._v("A2lixTranslationFormBundle"),a("OutboundLink")],1),t._v(" pour gérer vos traductions dans les formulaires de modifications de vos entités")])]),t._v(" "),a("h2",{attrs:{id:"des-urls-et-des-langues"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#des-urls-et-des-langues"}},[t._v("#")]),t._v(" Des urls et des langues")]),t._v(" "),a("p",[t._v("Vous pouvez également gérer "),a("a",{attrs:{href:"https://symfony.com/doc/current/routing.html#localized-routes-i18n",target:"_blank",rel:"noopener noreferrer"}},[t._v("les traductions de vos routes"),a("OutboundLink")],1),t._v(", directement dans l'annotation de route, pour définir l'url dans les différentes langues.")]),t._v(" "),a("p",[t._v("Il est également possible (et bien utile) de définir des préfixes en fonction des langues, pour "),a("strong",[t._v("toutes")]),t._v(" vos routes d'un coup.")]),t._v(" "),a("p",[t._v("Dans "),a("code",[t._v("config/routes/annotations.yaml")]),t._v(", vous pouvez écrire :")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("controllers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("resource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ../../src/Controller/\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" annotation\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("prefix")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("fr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Les routes sans un préfixe de langue seront en français")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("en")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/en'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# les routes avec /en au début seront en anglais")]),t._v("\n")])])]),a("h2",{attrs:{id:"recuperer-les-textes-sans-traductions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#recuperer-les-textes-sans-traductions"}},[t._v("#")]),t._v(" Récupérer les textes sans traductions")]),t._v(" "),a("p",[t._v("Pendant le développement, on n'a pas toujours les textes définitifs dans toutes les langues directement. Il faut parfois revenir sur le projet plus tard et refaire des fichiers de traduction (classiquement, lorsqu'on ajoute une nouvelle langue). Une commande Symfony est prévue pour récupérer les traductions manquantes : "),a("code",[t._v("translation:update")]),t._v(". Cette commande va chercher les appels aux traductions dans les fichiers Twig dans "),a("code",[t._v("templates")]),t._v(" (où les dossiers où vous avez dit avoir des templates) et dans les services appelant le "),a("code",[t._v("Translator")]),t._v(".")]),t._v(" "),a("p",[t._v("Quelques exemples d'utilisation :")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Affiche dans la console les traductions manquantes pour le français")]),t._v("\nphp bin/console translation:update --dump-messages fr\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Crée les entrées manquantes dans les fichiers pour le français")]),t._v("\nphp bin/console translation:update --force fr\n")])])]),a("h2",{attrs:{id:"de-buguer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#de-buguer"}},[t._v("#")]),t._v(" Dé-buguer")]),t._v(" "),a("p",[t._v("Quand vous ajoutez un fichier de traduction, les traductions ne sont pas forcément prises en compte directement. Pour corriger ce problème, lancer la commande "),a("code",[t._v("php bin/console cache:clear")]),t._v(".")]),t._v(" "),a("p",[t._v("Il existe également une commande "),a("code",[t._v("php bin/console debug:translation")]),t._v(" qui peut vous rendre de grands services :")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("php bin/console debug:translation fr")]),t._v(" permet de voir toutes les traductions disponibles pour le français et montre l'état (si la traduction est manquante dans la langue, par exemple)")]),t._v(" "),a("li",[a("code",[t._v("php bin/console debug:translation fr --domain=messages")]),t._v(" permet de voir toutes les traductions disponibles dans le domaine (fichier) messages, pour le français, et montre l'état (si la traduction est manquante dans la langue, par exemple)")]),t._v(" "),a("li",[a("code",[t._v("php bin/console debug:translation fr --only-unused")]),t._v(" permet de voir toutes les traductions non utilisées (ni dans le PHP, ni dans les Twig, mais définies dans les fichiers de traduction)")]),t._v(" "),a("li",[a("code",[t._v("php bin/console debug:translation fr --only-missing")]),t._v(" permet de voir toutes les traductions présentes dans le PHP ou les Twig, mais pas présentes dans les fichiers de traduction")])])])}),[],!1,null,null,null);s.default=n.exports}}]);