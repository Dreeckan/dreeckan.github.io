<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Easy Admin Bundle</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Les formations de Rémi Jarjat pour Human Booster">
    
    <link rel="preload" href="/assets/css/0.styles.f78ef515.css" as="style"><link rel="preload" href="/assets/js/app.a0283a3d.js" as="script"><link rel="preload" href="/assets/js/2.2bb1f65b.js" as="script"><link rel="preload" href="/assets/js/54.bc802a1c.js" as="script"><link rel="prefetch" href="/assets/js/10.a27b6e9d.js"><link rel="prefetch" href="/assets/js/11.2193e9e3.js"><link rel="prefetch" href="/assets/js/12.f39a5b44.js"><link rel="prefetch" href="/assets/js/13.2d6a44aa.js"><link rel="prefetch" href="/assets/js/14.0673e9ad.js"><link rel="prefetch" href="/assets/js/15.a5eeeada.js"><link rel="prefetch" href="/assets/js/16.33dfc880.js"><link rel="prefetch" href="/assets/js/17.c79025e1.js"><link rel="prefetch" href="/assets/js/18.959ecd03.js"><link rel="prefetch" href="/assets/js/19.9b33ed18.js"><link rel="prefetch" href="/assets/js/20.ef228a5b.js"><link rel="prefetch" href="/assets/js/21.95b935c1.js"><link rel="prefetch" href="/assets/js/22.6089ec44.js"><link rel="prefetch" href="/assets/js/23.1786dcbd.js"><link rel="prefetch" href="/assets/js/24.1cc8c701.js"><link rel="prefetch" href="/assets/js/25.bfc350ad.js"><link rel="prefetch" href="/assets/js/26.bc869606.js"><link rel="prefetch" href="/assets/js/27.2974731f.js"><link rel="prefetch" href="/assets/js/28.c59ffda1.js"><link rel="prefetch" href="/assets/js/29.a4f4f78c.js"><link rel="prefetch" href="/assets/js/3.b306ebdc.js"><link rel="prefetch" href="/assets/js/30.f86e1c24.js"><link rel="prefetch" href="/assets/js/31.3a368f51.js"><link rel="prefetch" href="/assets/js/32.ae32716d.js"><link rel="prefetch" href="/assets/js/33.04577fe2.js"><link rel="prefetch" href="/assets/js/34.0036621d.js"><link rel="prefetch" href="/assets/js/35.ae9cca52.js"><link rel="prefetch" href="/assets/js/36.46328e65.js"><link rel="prefetch" href="/assets/js/37.b265ca29.js"><link rel="prefetch" href="/assets/js/38.30e09b09.js"><link rel="prefetch" href="/assets/js/39.b34ea9f8.js"><link rel="prefetch" href="/assets/js/4.1b3f0ff6.js"><link rel="prefetch" href="/assets/js/40.6ee002ae.js"><link rel="prefetch" href="/assets/js/41.fc420cf4.js"><link rel="prefetch" href="/assets/js/42.209ec249.js"><link rel="prefetch" href="/assets/js/43.2d7d1cd7.js"><link rel="prefetch" href="/assets/js/44.b9fd8430.js"><link rel="prefetch" href="/assets/js/45.15ab68bd.js"><link rel="prefetch" href="/assets/js/46.01b8ec0e.js"><link rel="prefetch" href="/assets/js/47.112cd2f4.js"><link rel="prefetch" href="/assets/js/48.867e58b9.js"><link rel="prefetch" href="/assets/js/49.3ac37d3e.js"><link rel="prefetch" href="/assets/js/5.784f0707.js"><link rel="prefetch" href="/assets/js/50.f9dae8e2.js"><link rel="prefetch" href="/assets/js/51.43768ca2.js"><link rel="prefetch" href="/assets/js/52.dde625a3.js"><link rel="prefetch" href="/assets/js/53.72d8e143.js"><link rel="prefetch" href="/assets/js/55.e1f55ab2.js"><link rel="prefetch" href="/assets/js/56.1118b442.js"><link rel="prefetch" href="/assets/js/57.c6e74a85.js"><link rel="prefetch" href="/assets/js/58.cfab71d0.js"><link rel="prefetch" href="/assets/js/59.6fb84388.js"><link rel="prefetch" href="/assets/js/6.a94e70e9.js"><link rel="prefetch" href="/assets/js/60.f130f013.js"><link rel="prefetch" href="/assets/js/61.99515c03.js"><link rel="prefetch" href="/assets/js/62.d3e48f49.js"><link rel="prefetch" href="/assets/js/7.8a7612b0.js"><link rel="prefetch" href="/assets/js/8.82725242.js"><link rel="prefetch" href="/assets/js/9.8e900de4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f78ef515.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/LogoHB.png" alt="" class="logo"> <!----></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">Liste des cours</a></li><li><a href="/general/" class="sidebar-link">Culture numérique</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/git/" class="sidebar-heading clickable"><span>Git</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/linux/" class="sidebar-link">Linux</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/php/" class="sidebar-heading clickable"><span>PHP</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/symfony/" class="sidebar-heading clickable router-link-active open"><span>Symfony</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/symfony/01-installation.html" class="sidebar-link">Installer Symfony et son environnement de travail</a></li><li><a href="/symfony/10-structure.html" class="sidebar-link">Structure et utilisation d'un projet</a></li><li><a href="/symfony/20-routing.html" class="sidebar-link">Le routing</a></li><li><a href="/symfony/21-controllers.html" class="sidebar-link">Les controllers</a></li><li><a href="/symfony/22-twig.html" class="sidebar-link">Twig</a></li><li><a href="/symfony/23-injection.html" class="sidebar-link">Les services et l'injection de dépendances</a></li><li><a href="/symfony/24-doctrine.html" class="sidebar-link">Doctrine et la BdD</a></li><li><a href="/symfony/25-formulaires.html" class="sidebar-link">Formulaires</a></li><li><a href="/symfony/26-translation.html" class="sidebar-link">Les traductions</a></li><li><a href="/symfony/27-event-listeners.html" class="sidebar-link">Event listeners/subscribers</a></li><li><a href="/symfony/30-user.html" class="sidebar-link">Connexion et sécurisation</a></li><li><a href="/symfony/40-bundles.html" class="sidebar-link">Bundles</a></li><li><a href="/symfony/41-easy-admin.html" aria-current="page" class="active sidebar-link">Easy Admin Bundle</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/symfony/41-easy-admin.html#installation-et-mise-en-place" class="sidebar-link">Installation et mise en place</a></li><li class="sidebar-sub-header"><a href="/symfony/41-easy-admin.html#personnalisation-des-cruds" class="sidebar-link">Personnalisation des CRUDs</a></li><li class="sidebar-sub-header"><a href="/symfony/41-easy-admin.html#event-listeners" class="sidebar-link">Event Listeners</a></li></ul></li><li><a href="/symfony/42-api-platform.html" class="sidebar-link">Api Platform</a></li><li><a href="/symfony/80-cheat-sheet.html" class="sidebar-link">Pense-bêtes</a></li><li><a href="/symfony/81-quotidien.html" class="sidebar-link">Symfony au quotidien</a></li><li><a href="/symfony/82-docker.html" class="sidebar-link">Travailler avec Docker</a></li><li><a href="/symfony/90-doggies.html" class="sidebar-link">Projet : annonces de SPA / éleveurs</a></li><li><a href="/symfony/91-vote.html" class="sidebar-link">Projet : vote citoyen</a></li><li><a href="/symfony/99-exercices.html" class="sidebar-link">Exercices</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/js/" class="sidebar-heading clickable"><span>Javascript</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/lamp/" class="sidebar-link">Serveur Lamp</a></li><li><a href="/deploy/" class="sidebar-link">Déploiement</a></li><li><a href="/docker/" class="sidebar-link">Docker</a></li><li><a href="/ci/" class="sidebar-link">Intégration continue</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="easy-admin-bundle"><a href="#easy-admin-bundle" class="header-anchor">#</a> Easy Admin Bundle</h1> <p>En vidéo :</p> <div style="position:relative;padding-bottom:56.25%;height:0;"><iframe src="https://www.loom.com/embed/df76d7c122b1497792b6feaf82900a62" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="allowfullscreen" style="position:absolute;top:0;left:0;width:100%;height:100%;"></iframe></div> <p>Le bundle <a href="https://symfony.com/bundles/EasyAdminBundle/current/index.html" target="_blank" rel="noopener noreferrer">EasyAdminBundle<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> vous permet de générer un espace d'administration simplement à partir de quelques fichiers (controllers). Il est très rapide à prendre en main, très puissant et permet de créer une interface très complète, tout en vous permettant de la personnaliser.</p> <p>La <a href="https://symfony.com/bundles/EasyAdminBundle/current/index.html" target="_blank" rel="noopener noreferrer">documentation du bundle<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> détaille à peu près tout et je vais vous donner ici seulement les éléments qui permettent de démarrer rapidement.</p> <h2 id="installation-et-mise-en-place"><a href="#installation-et-mise-en-place" class="header-anchor">#</a> Installation et mise en place</h2> <p>Dans un premier temps, installez le bundle avec :</p> <p><code>composer require easycorp/easyadmin-bundle</code></p> <p>Normalement, cela ne devrait pas créer de problèmes 😉 . Vous pourrez alors créer votre premier Dashboard (personnellement, j'en ai toujours un seul) avec :</p> <p><code>php bin/console make:admin:dashboard</code></p> <p>Personnellement, je conserve les options proposées (nommer le controller <code>DashboardController</code> et les ranger dans <code>src/Controller/Admin</code>), mais c'est à vous de voir.</p> <p>Le fichier généré, avec quelques commentaires pour expliquer les différents éléments :</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Controller<span class="token punctuation">\</span>Admin</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">EasyCorp<span class="token punctuation">\</span>Bundle<span class="token punctuation">\</span>EasyAdminBundle<span class="token punctuation">\</span>Config<span class="token punctuation">\</span>Dashboard</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">EasyCorp<span class="token punctuation">\</span>Bundle<span class="token punctuation">\</span>EasyAdminBundle<span class="token punctuation">\</span>Config<span class="token punctuation">\</span>MenuItem</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">EasyCorp<span class="token punctuation">\</span>Bundle<span class="token punctuation">\</span>EasyAdminBundle<span class="token punctuation">\</span>Controller<span class="token punctuation">\</span>AbstractDashboardController</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Symfony<span class="token punctuation">\</span>Component<span class="token punctuation">\</span>HttpFoundation<span class="token punctuation">\</span>Response</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Symfony<span class="token punctuation">\</span>Component<span class="token punctuation">\</span>Routing<span class="token punctuation">\</span>Annotation<span class="token punctuation">\</span>Route</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">DashboardController</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractDashboardController</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Une route et une action, permettant d'afficher le dashboard</span>
    <span class="token comment">// lors de l'appel de l'uri /admin</span>
    <span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name">Route</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/admin'</span><span class="token punctuation">,</span> <span class="token attribute-class-name class-name">name</span><span class="token punctuation">:</span> <span class="token string single-quoted-string">'admin'</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">Response</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// La vue de base donne un petit &quot;tuto&quot; sur ce que vous pouvez faire avec le dashboard</span>
        <span class="token keyword">return</span> <span class="token keyword static-context">parent</span><span class="token operator">::</span><span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Différentes configurations sont possibles,</span>
    <span class="token comment">// pour personnaliser l'interface générale de votre admin</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">configureDashboard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">Dashboard</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name static-context">Dashboard</span><span class="token operator">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// C'est ici que nous ajouterons des liens vers les différents CRUDs de notre admin</span>
    <span class="token comment">// Cette méthode gère les éléments à afficher dans le menu de gauche de notre interface</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">configureMenuItems</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">iterable</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">yield</span> <span class="token class-name static-context">MenuItem</span><span class="token operator">::</span><span class="token function">linktoDashboard</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Dashboard'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'fa fa-home'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// yield MenuItem::linkToCrud('Label', 'fas fa-list', Entity::class);</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>Si vous essayez d'accéder à la route <code>/admin</code>, vous devriez avoir accès au dashboard de base.</p> <p>⚠️ Avant d'aller plus loin, je vous conseille très fortement d'<a href="https://symfony.com/doc/current/EasyAdminBundle/security.html" target="_blank" rel="noopener noreferrer">ajouter une contrainte pour que seuls les admins aient accès au dashboard<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (voir le fichier <code>config/packages/security.yaml</code> par exemple)</p> <p>Nous pouvons alors générer nos CRUDs avec la commande <code>php bin/console make:admin:crud</code>, puis ajouter les liens dans notre <code>DashBoardController</code> :</p> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">configureMenuItems</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">iterable</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">yield</span> <span class="token class-name static-context">MenuItem</span><span class="token operator">::</span><span class="token function">linktoDashboard</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Dashboard'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'fa fa-home'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">yield</span> <span class="token class-name static-context">MenuItem</span><span class="token operator">::</span><span class="token function">linkToCrud</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Un premier crud'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'fas fa-list'</span><span class="token punctuation">,</span> <span class="token class-name static-context">Entity1</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">yield</span> <span class="token class-name static-context">MenuItem</span><span class="token operator">::</span><span class="token function">linkToCrud</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Un second crud'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'fas fa-list'</span><span class="token punctuation">,</span> <span class="token class-name static-context">Entity2</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">yield</span> <span class="token class-name static-context">MenuItem</span><span class="token operator">::</span><span class="token function">linkToCrud</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Un troisième crud'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'fas fa-list'</span><span class="token punctuation">,</span> <span class="token class-name static-context">Entity3</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>⚠️ Les icônes comme <code>fa fa-home</code> ou <code>fas fa-list</code> viennent de <a href="https://fontawesome.com/v5.15/icons?d=gallery&amp;p=2&amp;m=free" target="_blank" rel="noopener noreferrer">font-awesome, librairie très utilisée d'icônes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> et vous pouvez bien sûr les remplacer par celles qui vous semblent plus pertinentes !</p> <p>Pour personnaliser le dashboard, l'affichage des liens, etc, je vous invite à lire <a href="https://symfony.com/bundles/EasyAdminBundle/current/dashboards.html" target="_blank" rel="noopener noreferrer">la documentation sur le sujet<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="personnalisation-des-cruds"><a href="#personnalisation-des-cruds" class="header-anchor">#</a> Personnalisation des CRUDs</h2> <p>Lors de la génération d'un CRUD, vous obtenez une classe très vide, mais suffisante pour avoir un CRUD fonctionnel :</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Controller<span class="token punctuation">\</span>Admin</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Entity<span class="token punctuation">\</span>Entity</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">EasyCorp<span class="token punctuation">\</span>Bundle<span class="token punctuation">\</span>EasyAdminBundle<span class="token punctuation">\</span>Controller<span class="token punctuation">\</span>AbstractCrudController</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">EntityCrudController</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractCrudController</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function-definition function">getEntityFqcn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">string</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name static-context">Entity</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>Par contre, dès que notre projet devient un peu complexe, il devient nécessaire de modifier les éléments affichés ou modifiable dans les formulaires. Pour cela, nous allons surcharger la méthode <code>configureFields()</code>.</p> <p>⚠️ Il faut garder en tête que les CRUD de EasyAdmin sont décomposés en 4 pages : <code>index</code>, <code>detail</code>, <code>edit</code> et <code>new</code>. On peut personnaliser quels champs apparaissent sur chacune de ces pages !</p> <p>Voici un exemple commenté de ce que l'on peut trouver / faire :</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">configureFields</span><span class="token punctuation">(</span><span class="token keyword type-hint">string</span> <span class="token variable">$pageName</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">iterable</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>
        <span class="token comment">// On affiche la propriété id de notre entité, dans un champ IdField (spécifique aux identifiants).</span>
        <span class="token class-name static-context">IdField</span><span class="token operator">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">)</span>
            <span class="token comment">// Mais on ne permet pas de la modifier, ni l'afficher dans les formulaires.</span>
            <span class="token operator">-&gt;</span><span class="token function">hideOnForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token comment">// On aurait pu faire le contraire et utiliser la méthode.</span>
            <span class="token comment">// -&gt;onlyOnIndex() pour ne l'afficher que sur la liste.</span>
        <span class="token punctuation">,</span>
        <span class="token comment">// Name est modifiable dans un champ textuel (widget input de type text).</span>
        <span class="token class-name static-context">TextField</span><span class="token operator">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">// Description est un texte que l'on pourra mettre en forme, grâce au TextEditorField.</span>
        <span class="token comment">// Attention, la mise en forme se fait en HTML, et il faut le prendre en compte à l'affichage.</span>
        <span class="token comment">// Nous aurions aussi pu utiliser TextareaField, pour nosu passer des outils de mise en forme.</span>
        <span class="token class-name static-context">TextEditorField</span><span class="token operator">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'description'</span><span class="token punctuation">)</span>
            <span class="token comment">// On affiche la description sur toutes les pages, sauf la liste</span>
            <span class="token operator">-&gt;</span><span class="token function">hideOnIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">,</span>
        <span class="token comment">// Le BooleanField permet également de changer la valeur depuis la liste.</span>
        <span class="token comment">// Si vous ne le souhaitez pas, appelez la méthode -&gt;renderAsSwitch(false).</span>
        <span class="token class-name static-context">BooleanField</span><span class="token operator">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'inMenu'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token class-name static-context">IntegerField</span><span class="token operator">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'orderBy'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">// Comme son nom l'indique, ce champ AssociationField permet de gérer l'association entre deux entités.</span>
        <span class="token comment">// Dans les faits, un champ &lt;select&gt; sera affiché pour choisir un ou plusieurs entités à associer.</span>
        <span class="token comment">// Pour que ce champ fonctionne, pensez à implémenter la méthode __toString() dans les entités à associer.</span>
        <span class="token class-name static-context">AssociationField</span><span class="token operator">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'parent'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Il y a, bien sûr, <a href="https://symfony.com/bundles/EasyAdminBundle/current/crud.html" target="_blank" rel="noopener noreferrer">de très nombreuses autres options, présentées dans la documentation sur les cruds<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ou dans <a href="https://symfony.com/doc/current/EasyAdminBundle/fields.html" target="_blank" rel="noopener noreferrer">la documentation sur les champs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="event-listeners"><a href="#event-listeners" class="header-anchor">#</a> Event Listeners</h2> <p><a href="https://symfony.com/doc/current/EasyAdminBundle/events.html" target="_blank" rel="noopener noreferrer">La documentation sur les event listeners de EasyAdminBundle<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="/symfony/27-event-listeners.html">La partie du cours sur les event listeners</a></p> <p>Plusieurs événements existent et permettent de compléter le fonctionnement d'EasyAdmin. Ils permettent de déclencher d'autres actions avant ou après certaines actions (enregistrement d'une entité, suppression d'une entité, etc.) pour compléter le fonctionnement &quot;simple&quot; du CRUD. C'est pas exemple très utile pour hasher le mot de passe d'un utilisateur avant de l'enregistrer en <abbr title="Base de Données">BdD</abbr>.</p> <p>Les deux événements que j'utilise le plus :</p> <ul><li><code>BeforeEntityPersistedEvent</code> est déclenché lorsqu'une entité est créée et permet d'ajouter du fonctionnel <strong>avant</strong> qu'elle ne soit enregistrée en <abbr title="Base de Données">BdD</abbr></li> <li><code>BeforeEntityUpdatedEvent</code> est déclenché lorsqu'une entité est mise à jour et permet d'ajouter du fonctionnel <strong>avant</strong> qu'elle ne soit enregistrée en <abbr title="Base de Données">BdD</abbr></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/symfony/40-bundles.html" class="prev">
        Bundles
      </a></span> <span class="next"><a href="/symfony/42-api-platform.html">
        Api Platform
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.a0283a3d.js" defer></script><script src="/assets/js/2.2bb1f65b.js" defer></script><script src="/assets/js/54.bc802a1c.js" defer></script>
  </body>
</html>
