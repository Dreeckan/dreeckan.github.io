<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>PHP Orienté objet</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Les formations de Rémi Jarjat pour Human Booster">
    
    <link rel="preload" href="/assets/css/0.styles.f78ef515.css" as="style"><link rel="preload" href="/assets/js/app.a0283a3d.js" as="script"><link rel="preload" href="/assets/js/2.2bb1f65b.js" as="script"><link rel="preload" href="/assets/js/37.b265ca29.js" as="script"><link rel="prefetch" href="/assets/js/10.a27b6e9d.js"><link rel="prefetch" href="/assets/js/11.2193e9e3.js"><link rel="prefetch" href="/assets/js/12.f39a5b44.js"><link rel="prefetch" href="/assets/js/13.2d6a44aa.js"><link rel="prefetch" href="/assets/js/14.0673e9ad.js"><link rel="prefetch" href="/assets/js/15.a5eeeada.js"><link rel="prefetch" href="/assets/js/16.33dfc880.js"><link rel="prefetch" href="/assets/js/17.c79025e1.js"><link rel="prefetch" href="/assets/js/18.959ecd03.js"><link rel="prefetch" href="/assets/js/19.9b33ed18.js"><link rel="prefetch" href="/assets/js/20.ef228a5b.js"><link rel="prefetch" href="/assets/js/21.95b935c1.js"><link rel="prefetch" href="/assets/js/22.6089ec44.js"><link rel="prefetch" href="/assets/js/23.1786dcbd.js"><link rel="prefetch" href="/assets/js/24.1cc8c701.js"><link rel="prefetch" href="/assets/js/25.bfc350ad.js"><link rel="prefetch" href="/assets/js/26.bc869606.js"><link rel="prefetch" href="/assets/js/27.2974731f.js"><link rel="prefetch" href="/assets/js/28.c59ffda1.js"><link rel="prefetch" href="/assets/js/29.a4f4f78c.js"><link rel="prefetch" href="/assets/js/3.b306ebdc.js"><link rel="prefetch" href="/assets/js/30.f86e1c24.js"><link rel="prefetch" href="/assets/js/31.3a368f51.js"><link rel="prefetch" href="/assets/js/32.ae32716d.js"><link rel="prefetch" href="/assets/js/33.04577fe2.js"><link rel="prefetch" href="/assets/js/34.0036621d.js"><link rel="prefetch" href="/assets/js/35.ae9cca52.js"><link rel="prefetch" href="/assets/js/36.46328e65.js"><link rel="prefetch" href="/assets/js/38.30e09b09.js"><link rel="prefetch" href="/assets/js/39.b34ea9f8.js"><link rel="prefetch" href="/assets/js/4.1b3f0ff6.js"><link rel="prefetch" href="/assets/js/40.6ee002ae.js"><link rel="prefetch" href="/assets/js/41.fc420cf4.js"><link rel="prefetch" href="/assets/js/42.209ec249.js"><link rel="prefetch" href="/assets/js/43.2d7d1cd7.js"><link rel="prefetch" href="/assets/js/44.b9fd8430.js"><link rel="prefetch" href="/assets/js/45.15ab68bd.js"><link rel="prefetch" href="/assets/js/46.01b8ec0e.js"><link rel="prefetch" href="/assets/js/47.112cd2f4.js"><link rel="prefetch" href="/assets/js/48.867e58b9.js"><link rel="prefetch" href="/assets/js/49.3ac37d3e.js"><link rel="prefetch" href="/assets/js/5.784f0707.js"><link rel="prefetch" href="/assets/js/50.f9dae8e2.js"><link rel="prefetch" href="/assets/js/51.43768ca2.js"><link rel="prefetch" href="/assets/js/52.dde625a3.js"><link rel="prefetch" href="/assets/js/53.72d8e143.js"><link rel="prefetch" href="/assets/js/54.bc802a1c.js"><link rel="prefetch" href="/assets/js/55.e1f55ab2.js"><link rel="prefetch" href="/assets/js/56.1118b442.js"><link rel="prefetch" href="/assets/js/57.c6e74a85.js"><link rel="prefetch" href="/assets/js/58.cfab71d0.js"><link rel="prefetch" href="/assets/js/59.6fb84388.js"><link rel="prefetch" href="/assets/js/6.a94e70e9.js"><link rel="prefetch" href="/assets/js/60.f130f013.js"><link rel="prefetch" href="/assets/js/61.99515c03.js"><link rel="prefetch" href="/assets/js/62.d3e48f49.js"><link rel="prefetch" href="/assets/js/7.8a7612b0.js"><link rel="prefetch" href="/assets/js/8.82725242.js"><link rel="prefetch" href="/assets/js/9.8e900de4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f78ef515.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/LogoHB.png" alt="" class="logo"> <!----></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">Liste des cours</a></li><li><a href="/general/" class="sidebar-link">Culture numérique</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/git/" class="sidebar-heading clickable"><span>Git</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/linux/" class="sidebar-link">Linux</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/php/" class="sidebar-heading clickable router-link-active open"><span>PHP</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/php/00-intro.html" class="sidebar-link">Introduction à PHP</a></li><li><a href="/php/01-doc.html" class="sidebar-link">PSR et PHP Doc</a></li><li><a href="/php/02-objet.html" aria-current="page" class="active sidebar-link">PHP Orienté objet</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/php/02-objet.html#une-classe" class="sidebar-link">Une classe</a></li><li class="sidebar-sub-header"><a href="/php/02-objet.html#utiliser-nos-classes" class="sidebar-link">Utiliser nos classes</a></li><li class="sidebar-sub-header"><a href="/php/02-objet.html#visibilite-des-proprietes-et-methodes" class="sidebar-link">Visibilité des propriétés et méthodes</a></li><li class="sidebar-sub-header"><a href="/php/02-objet.html#documenter-ses-classes" class="sidebar-link">Documenter ses classes</a></li><li class="sidebar-sub-header"><a href="/php/02-objet.html#this-pseudo-variable-vraie-utilite" class="sidebar-link">$this : pseudo-variable, vraie utilité</a></li><li class="sidebar-sub-header"><a href="/php/02-objet.html#constructeur" class="sidebar-link">Constructeur</a></li><li class="sidebar-sub-header"><a href="/php/02-objet.html#constantes-de-classe" class="sidebar-link">Constantes de classe</a></li><li class="sidebar-sub-header"><a href="/php/02-objet.html#this-ou-self" class="sidebar-link">$this ou self ?</a></li><li class="sidebar-sub-header"><a href="/php/02-objet.html#heritage" class="sidebar-link">Héritage</a></li><li class="sidebar-sub-header"><a href="/php/02-objet.html#visibilite" class="sidebar-link">Visibilité</a></li><li class="sidebar-sub-header"><a href="/php/02-objet.html#la-fonction-get-class" class="sidebar-link">La fonction get_class()</a></li><li class="sidebar-sub-header"><a href="/php/02-objet.html#instanceof" class="sidebar-link">instanceof</a></li><li class="sidebar-sub-header"><a href="/php/02-objet.html#methodes-abstraites" class="sidebar-link">Méthodes abstraites</a></li><li class="sidebar-sub-header"><a href="/php/02-objet.html#interface" class="sidebar-link">Interface</a></li><li class="sidebar-sub-header"><a href="/php/02-objet.html#traits" class="sidebar-link">Traits</a></li><li class="sidebar-sub-header"><a href="/php/02-objet.html#espaces-de-nom" class="sidebar-link">Espaces de nom</a></li><li class="sidebar-sub-header"><a href="/php/02-objet.html#exercices" class="sidebar-link">Exercices</a></li></ul></li><li><a href="/php/03-pdo.html" class="sidebar-link">PDO (PHP Data Object)</a></li><li><a href="/php/04-rest.html" class="sidebar-link">Webservices REST</a></li><li><a href="/php/99-exercices.html" class="sidebar-link">Exercices PHP</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/symfony/" class="sidebar-heading clickable"><span>Symfony</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/js/" class="sidebar-heading clickable"><span>Javascript</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/lamp/" class="sidebar-link">Serveur Lamp</a></li><li><a href="/deploy/" class="sidebar-link">Déploiement</a></li><li><a href="/docker/" class="sidebar-link">Docker</a></li><li><a href="/ci/" class="sidebar-link">Intégration continue</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="php-oriente-objet"><a href="#php-oriente-objet" class="header-anchor">#</a> PHP Orienté objet</h1> <p><a href="https://www.php.net/manual/fr/language.oop5.basic.php" target="_blank" rel="noopener noreferrer">La documentation PHP<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://openclassrooms.com/fr/courses/1665806-programmez-en-oriente-objet-en-php" target="_blank" rel="noopener noreferrer">Sur OpenClassRooms<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="une-classe"><a href="#une-classe" class="header-anchor">#</a> Une classe</h2> <p>En PHP, une classe se nomme en PascalCase, est l'unique contenu d'un fichier (par convention, ça n'est pas obligatoire) et peut avoir :</p> <ul><li>des constantes</li> <li>des propriétés</li> <li>des méthodes</li> <li>des appels de traits</li></ul> <p>⚠️ Ne pas confondre classe et objet. Une classe est un plan de fabrication, l'objet est une instance (une version concrète) de cette classe.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">// classes/Beanie.php</span>

<span class="token comment">// Nom avec une majuscule entre chaque mot et dès le premier mot</span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">Beanie</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Une propriété.</span>
    <span class="token comment">// On ne peut pas en définir le type directement,</span>
    <span class="token comment">// mais on peut l'indiquer en annotation </span>
    <span class="token keyword">protected</span> <span class="token keyword type-declaration">string</span> <span class="token variable">$material</span><span class="token punctuation">;</span> 
    
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">material</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'Wool'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

     <span class="token comment">// Une méthode</span>
     <span class="token comment">// sans type de retour, mais on pourrait l'ajouter</span>
     <span class="token comment">// et/ou l'indiquer en annotation</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getMaterial</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">material</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">/**
     * @param string|null $material
     * @return $this
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">setMaterial</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token keyword type-hint">string</span> <span class="token variable">$material</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">Beanie</span>
    <span class="token punctuation">{</span>
         <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">material</span> <span class="token operator">=</span> <span class="token variable">$material</span><span class="token punctuation">;</span>
         
         <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// index.php</span>
<span class="token comment">// Instanciation d'un objet</span>
<span class="token comment">// Et appel d'une méthode</span>
<span class="token variable">$beanie</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Beanie</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$beanie</span><span class="token operator">-&gt;</span><span class="token function">setMaterial</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Wool'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$beanie</span><span class="token operator">-&gt;</span><span class="token function">getMaterial</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre></div><h2 id="utiliser-nos-classes"><a href="#utiliser-nos-classes" class="header-anchor">#</a> Utiliser nos classes</h2> <p>En PHP, par défaut, les classes ne sont pas chargées automatiquement, il faut les charger nous-même (soit avec <code>require</code>/<code>require_once</code>, soit avec un autoloader qui le fera pour nous).</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">require</span> <span class="token string single-quoted-string">'classes/MaClasse.php'</span><span class="token punctuation">;</span>
</code></pre></div><p>Ou utiliser un autoloader :</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token function">spl_autoload_register</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">require_once</span> <span class="token string double-quoted-string">&quot;classes/<span class="token interpolation"><span class="token variable">$class</span></span>.php&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="visibilite-des-proprietes-et-methodes"><a href="#visibilite-des-proprietes-et-methodes" class="header-anchor">#</a> Visibilité des propriétés et méthodes</h2> <ul><li><code>public</code> : la propriété / méthode est utilisable en dehors de l'objet</li> <li><code>private</code> : la propriété / méthode <strong>n'est pas</strong> utilisable en dehors de l'objet</li> <li><code>protected</code> : la propriété / méthode n'est utilisable <strong>que</strong> par les classes enfants (voir section sur l'héritage)</li></ul> <h2 id="documenter-ses-classes"><a href="#documenter-ses-classes" class="header-anchor">#</a> Documenter ses classes</h2> <p>Les annotations et le typage sont très utiles pour définir les types des propriétés, paramètres et valeurs de retour. Hélas, en PHP 7, nous ne pouvons pas toujours typer directement les propriétés. Nous sommes obligés d'utiliser les annotations pour le faire (c'est disponible à partir de PHP 7.4 seulement).</p> <p>En PHP, une variable peut également avoir plusieurs types possibles. On notera alors ces types en annotation, dans la plupart des cas (<code>int|float</code> par exemple). Pour le cas d'une valeur pouvant être <code>null</code>, on ajoutera un <code>?</code> avant le type (<code>?int</code> par exemple).</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">class</span> <span class="token class-name-definition class-name">Beanie</span> 
<span class="token punctuation">{</span>
    <span class="token comment">/** @var array */</span>
    <span class="token keyword">protected</span> <span class="token variable">$material</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// On indique le(s) type(s) attendu(s)</span>
    
    <span class="token comment">/**
     * @param bool $aCondition
     * 
     * @return array
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getMaterial</span><span class="token punctuation">(</span><span class="token keyword type-hint">bool</span> <span class="token variable">$aCondition</span> <span class="token operator">=</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">array</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">material</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="this-pseudo-variable-vraie-utilite"><a href="#this-pseudo-variable-vraie-utilite" class="header-anchor">#</a> <code>$this</code> : pseudo-variable, vraie utilité</h2> <p><code>$this</code> permet d'accéder à l'objet en cours. Toujours utile pour le mettre à jour !
Il est nécessaire pour assurer l'encapsulation de nos propriétés (on ne les modifie jamais directement, mais toujours <em>via</em> des méthodes).</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">class</span> <span class="token class-name-definition class-name">Beanie</span> 
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token variable">$material</span><span class="token punctuation">;</span>
     
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getMaterial</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Une méthode</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// $this, utilisée dans un objet permet d'accéder à l'objet en cours</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">material</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="constructeur"><a href="#constructeur" class="header-anchor">#</a> Constructeur</h2> <p>On peut définir des valeurs par défaut (ou d'initialisation) pour les propriétés d'un objet</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">class</span> <span class="token class-name-definition class-name">Beanie</span> 
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token variable">$material</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'wool'</span><span class="token punctuation">;</span><span class="token comment">// On donne une valeur par défaut</span>
    
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// La même chose, mais, ici, on peut faire des calculs,</span>
        <span class="token comment">// appeler des méthodes de l'objet, etc.</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">material</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'wool'</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="constantes-de-classe"><a href="#constantes-de-classe" class="header-anchor">#</a> Constantes de classe</h2> <p>La <a href="https://www.php.net/manual/fr/language.oop5.constants.php" target="_blank" rel="noopener noreferrer">documentation sur les constantes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">class</span> <span class="token class-name-definition class-name">Beanie</span> 
<span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token constant">AVAILABLE_SIZES</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'S'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'M'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'L'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'XL'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// Une constante de classe</span>
    
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getAvailableSizes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword static-context">self</span><span class="token operator">::</span><span class="token constant">AVAILABLE_SIZES</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token class-name static-context">Beanie</span><span class="token operator">::</span><span class="token constant">AVAILABLE_SIZES</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><h2 id="this-ou-self"><a href="#this-ou-self" class="header-anchor">#</a> $this ou self ?</h2> <ul><li>Les deux s'utilisent dans la classe,</li> <li><code>$this</code> si vous êtes dans le contexte d'un objet instancié (&quot;j'ai des propriétés/méthodes, je vais m'en servir&quot;)</li> <li><code>self</code> pour appeler des éléments dits <code>static</code> (constantes, méthodes statiques) (&quot;Des éléments sont définis par la classe, je veux m'en servir dans mon objet&quot;)</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">class</span> <span class="token class-name-definition class-name">Beanie</span> 
<span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token constant">AVAILABLE_SIZES</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'S'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'M'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'L'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'XL'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// Appelée avec Beanie::AVAILABLE_SIZES</span>
    
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token variable">$property</span><span class="token punctuation">;</span> <span class="token comment">// Appelée avec Beanie::$property</span>
    
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getAvailableSizes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword static-context">self</span><span class="token operator">::</span><span class="token constant">AVAILABLE_SIZES</span><span class="token punctuation">;</span> <span class="token comment">// appelée avec $b-&gt;getAvailableSizes()</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function-definition function">availableSizes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword static-context">self</span><span class="token operator">::</span><span class="token constant">AVAILABLE_SIZES</span><span class="token punctuation">;</span> <span class="token comment">// appelée avec Beanie::availableSizes()</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="heritage"><a href="#heritage" class="header-anchor">#</a> Héritage</h2> <p><a href="https://blog.delusionmfg.com/12-types-of-beanies-you-have-to-check-out" target="_blank" rel="noopener noreferrer">Des types de bonnets sous-côtés<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">class</span> <span class="token class-name-definition class-name">EarflapBeanie</span> <span class="token keyword">extends</span> <span class="token class-name">Beanie</span>
<span class="token punctuation">{</span>
    <span class="token comment">// A accès aux propriétés et aux méthodes de Beanie, mais uniquement si public ou protected </span>
    <span class="token comment">// Cette propriété n'existe que pour les objets EarflapBeanie</span>
    <span class="token keyword">private</span> <span class="token variable">$uneProprieteEnPlus</span><span class="token punctuation">;</span>
    
    <span class="token comment">// On peut également surcharger le constructeur (ou toute autre méthode de l'objet parent)</span>
    <span class="token comment">// pour ajouter des comportements</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// On peut appeler le constructeur du parent (pour en garder le fonctionnement)</span>
        <span class="token keyword static-context">parent</span><span class="token operator">::</span><span class="token function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// En général, on veut ajouter des comportements spécifiques après l'appel du constructeur parent</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">uneProprieteEnPlus</span> <span class="token operator">=</span> <span class="token constant boolean">true</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">uneMethodeEnPlus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Cette méthode n'est pas utilisable sur un objet Beanie, mais uniquement par les objets EarflapBeanie</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="visibilite"><a href="#visibilite" class="header-anchor">#</a> Visibilité</h2> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">class</span> <span class="token class-name-definition class-name">Beanie</span> 
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token variable">$name</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token variable">$test</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token variable">$description</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">EarflapBeanie</span> <span class="token keyword">extends</span> <span class="token class-name">Beanie</span>
<span class="token punctuation">{</span>
    <span class="token comment">// On peut utiliser / surcharger $this-&gt;name et $this-&gt;$description</span>
    <span class="token comment">// mais pas $this-&gt;test qui n'est disponible QUE dans les objets Beanie et pas leurs enfants</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="la-fonction-get-class"><a href="#la-fonction-get-class" class="header-anchor">#</a> La fonction <code>get_class()</code></h2> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name-definition class-name">Bar</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// On récupère l'objet réellement en cours</span>
        <span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">get_class</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// On récupère l'objet où la déclaration est faite</span>
        <span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">get_class</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">Foo</span> <span class="token keyword">extends</span> <span class="token class-name">Bar</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token variable">$foo</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token class-name static-context">Foo</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Renvoie la même chose que get_class($foo)</span>

</code></pre></div><h2 id="instanceof"><a href="#instanceof" class="header-anchor">#</a> instanceof</h2> <ul><li>Mot-clé permettant de vérifier si une variable est une instance d'une classe/interface (ou d'une de ses filles)</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// Bar.php</span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">Bar</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// Foo.php</span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">Foo</span> <span class="token keyword">extends</span> <span class="token class-name">Bar</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// index.php</span>
<span class="token variable">$foo</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$bar</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$foo</span> <span class="token keyword">instanceof</span> <span class="token class-name">Foo</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Bool (true)</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$foo</span> <span class="token keyword">instanceof</span> <span class="token class-name">Bar</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Bool (true)</span>
</code></pre></div><h2 id="methodes-abstraites"><a href="#methodes-abstraites" class="header-anchor">#</a> Méthodes abstraites</h2> <p><a href="https://www.php.net/manual/fr/language.oop5.abstract.php" target="_blank" rel="noopener noreferrer">La documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name-definition class-name">Test</span> 
<span class="token punctuation">{</span>
    <span class="token keyword">abstract</span> <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">Foo</span> <span class="token keyword">extends</span> <span class="token class-name">Test</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Pour étendre Test, Foo DOIT avoir une méthode getTest() définie</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string single-quoted-string">'ok'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="interface"><a href="#interface" class="header-anchor">#</a> Interface</h2> <p><a href="https://www.php.net/manual/fr/language.oop5.interfaces.php" target="_blank" rel="noopener noreferrer">La documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">interface</span> <span class="token class-name-definition class-name">Test</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">Foo</span> <span class="token keyword">implements</span> <span class="token class-name">Test</span><span class="token punctuation">,</span> Test2<span class="token punctuation">,</span> Test3
<span class="token punctuation">{</span>
    <span class="token comment">// Pour implémenter Test, Foo DOIT avoir une méthode getTest() définie</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string single-quoted-string">'ok'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="traits"><a href="#traits" class="header-anchor">#</a> Traits</h2> <ul><li><a href="https://www.php.net/manual/fr/language.oop5.traits.php" target="_blank" rel="noopener noreferrer">La documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Fonctionne comme une classe</li> <li>Regroupe des propriétés et des méthodes</li> <li>S'utilise avec <code>use</code> (oui, encore !) pour <strong>inclure</strong> le code du trait dans une classe</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// classes/Traits/TestTrait.php</span>
<span class="token keyword">namespace</span> <span class="token package">Traits</span><span class="token punctuation">;</span>
<span class="token keyword">trait</span> <span class="token class-name-definition class-name">TestTrait</span> 
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token variable">$test</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function-definition function">getTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// classes/Test.php</span>
<span class="token keyword">use</span> <span class="token package">Traits<span class="token punctuation">\</span>TestTrait</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">Test</span>
<span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token package">TestTrait</span><span class="token punctuation">;</span>
    <span class="token keyword">use</span> <span class="token package">TestTrait2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="espaces-de-nom"><a href="#espaces-de-nom" class="header-anchor">#</a> Espaces de nom</h2> <p>Le nommage d'une classe (on parle de nom complet ou <abbr title="Fully Qualified Class Name">FQCN</abbr>) ne se limite pas au seul nom de la classe. Le <abbr title="Fully Qualified Class Name">FQCN</abbr> contient également l'espace de nom de la classe, c’est-à-dire un éventuel préfixe, et le dossier où la classe se trouve.
Ce <abbr title="Fully Qualified Class Name">FQCN</abbr> se base sur un dossier (dans notre exemple <code>classes</code>).</p> <p>Imaginons l'organisation de fichiers suivantes :</p> <div class="language- extra-class"><pre class="language-text"><code>classes/
| - Traits/
    | - Truc/
        | - TestTrait2.php
    | - TestTrait.php
| - Foo.php
| - Bar.php
| - Baz.php
</code></pre></div><p>Si <code>classes</code> est le dossier servant de base à nos classes PHP, les différentes classes auront (ou non) un namespace (espace de nom). Par exemple, <code>Foo</code>, <code>Bar</code>, <code>Baz</code> n'auront pas de namespace (ils sont à la racine de nos classes), alors que <code>TestTrait</code> et <code>TestTrait2</code> auront un namespace, pour indiquer le dossier où il se trouve :</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// classes/Traits/TestTrait.php</span>
<span class="token keyword">namespace</span> <span class="token package">Traits</span><span class="token punctuation">;</span>

<span class="token keyword">trait</span> <span class="token class-name-definition class-name">TestTrait</span> 
<span class="token punctuation">{</span>
<span class="token comment">// ...</span>
<span class="token punctuation">}</span>
<span class="token comment">// classes/Traits/Truc/TestTrait2.php</span>
<span class="token keyword">namespace</span> <span class="token package">Traits<span class="token punctuation">\</span>Truc</span><span class="token punctuation">;</span>

<span class="token keyword">trait</span> <span class="token class-name-definition class-name">TestTrait2</span>
<span class="token punctuation">{</span>
<span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>⚠️ La séparation des dossiers s'écrit avec un <code>\</code> dans les namespaces</p> <h2 id="exercices"><a href="#exercices" class="header-anchor">#</a> Exercices</h2> <p>Pour vous entrainer à manipuler des objets PHP, utiliser le <a href="https://github.com/Dreeckan/exercices-php/" target="_blank" rel="noopener noreferrer">repository Github dédié à divers exercices<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Les exercices 1 à 7 concernent cette partie</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/php/01-doc.html" class="prev">
        PSR et PHP Doc
      </a></span> <span class="next"><a href="/php/03-pdo.html">
        PDO (PHP Data Object)
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.a0283a3d.js" defer></script><script src="/assets/js/2.2bb1f65b.js" defer></script><script src="/assets/js/37.b265ca29.js" defer></script>
  </body>
</html>
