<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Serveur Lamp</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Les formations de Rémi Jarjat pour Human Booster">
    
    <link rel="preload" href="/assets/css/0.styles.f78ef515.css" as="style"><link rel="preload" href="/assets/js/app.a0283a3d.js" as="script"><link rel="preload" href="/assets/js/2.2bb1f65b.js" as="script"><link rel="preload" href="/assets/js/33.04577fe2.js" as="script"><link rel="prefetch" href="/assets/js/10.a27b6e9d.js"><link rel="prefetch" href="/assets/js/11.2193e9e3.js"><link rel="prefetch" href="/assets/js/12.f39a5b44.js"><link rel="prefetch" href="/assets/js/13.2d6a44aa.js"><link rel="prefetch" href="/assets/js/14.0673e9ad.js"><link rel="prefetch" href="/assets/js/15.a5eeeada.js"><link rel="prefetch" href="/assets/js/16.33dfc880.js"><link rel="prefetch" href="/assets/js/17.c79025e1.js"><link rel="prefetch" href="/assets/js/18.959ecd03.js"><link rel="prefetch" href="/assets/js/19.9b33ed18.js"><link rel="prefetch" href="/assets/js/20.ef228a5b.js"><link rel="prefetch" href="/assets/js/21.95b935c1.js"><link rel="prefetch" href="/assets/js/22.6089ec44.js"><link rel="prefetch" href="/assets/js/23.1786dcbd.js"><link rel="prefetch" href="/assets/js/24.1cc8c701.js"><link rel="prefetch" href="/assets/js/25.bfc350ad.js"><link rel="prefetch" href="/assets/js/26.bc869606.js"><link rel="prefetch" href="/assets/js/27.2974731f.js"><link rel="prefetch" href="/assets/js/28.c59ffda1.js"><link rel="prefetch" href="/assets/js/29.a4f4f78c.js"><link rel="prefetch" href="/assets/js/3.b306ebdc.js"><link rel="prefetch" href="/assets/js/30.f86e1c24.js"><link rel="prefetch" href="/assets/js/31.3a368f51.js"><link rel="prefetch" href="/assets/js/32.ae32716d.js"><link rel="prefetch" href="/assets/js/34.0036621d.js"><link rel="prefetch" href="/assets/js/35.ae9cca52.js"><link rel="prefetch" href="/assets/js/36.46328e65.js"><link rel="prefetch" href="/assets/js/37.b265ca29.js"><link rel="prefetch" href="/assets/js/38.30e09b09.js"><link rel="prefetch" href="/assets/js/39.b34ea9f8.js"><link rel="prefetch" href="/assets/js/4.1b3f0ff6.js"><link rel="prefetch" href="/assets/js/40.6ee002ae.js"><link rel="prefetch" href="/assets/js/41.fc420cf4.js"><link rel="prefetch" href="/assets/js/42.209ec249.js"><link rel="prefetch" href="/assets/js/43.2d7d1cd7.js"><link rel="prefetch" href="/assets/js/44.b9fd8430.js"><link rel="prefetch" href="/assets/js/45.15ab68bd.js"><link rel="prefetch" href="/assets/js/46.01b8ec0e.js"><link rel="prefetch" href="/assets/js/47.112cd2f4.js"><link rel="prefetch" href="/assets/js/48.867e58b9.js"><link rel="prefetch" href="/assets/js/49.3ac37d3e.js"><link rel="prefetch" href="/assets/js/5.784f0707.js"><link rel="prefetch" href="/assets/js/50.f9dae8e2.js"><link rel="prefetch" href="/assets/js/51.43768ca2.js"><link rel="prefetch" href="/assets/js/52.dde625a3.js"><link rel="prefetch" href="/assets/js/53.72d8e143.js"><link rel="prefetch" href="/assets/js/54.bc802a1c.js"><link rel="prefetch" href="/assets/js/55.e1f55ab2.js"><link rel="prefetch" href="/assets/js/56.1118b442.js"><link rel="prefetch" href="/assets/js/57.c6e74a85.js"><link rel="prefetch" href="/assets/js/58.cfab71d0.js"><link rel="prefetch" href="/assets/js/59.6fb84388.js"><link rel="prefetch" href="/assets/js/6.a94e70e9.js"><link rel="prefetch" href="/assets/js/60.f130f013.js"><link rel="prefetch" href="/assets/js/61.99515c03.js"><link rel="prefetch" href="/assets/js/62.d3e48f49.js"><link rel="prefetch" href="/assets/js/7.8a7612b0.js"><link rel="prefetch" href="/assets/js/8.82725242.js"><link rel="prefetch" href="/assets/js/9.8e900de4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f78ef515.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/LogoHB.png" alt="" class="logo"> <!----></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">Liste des cours</a></li><li><a href="/general/" class="sidebar-link">Culture numérique</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/git/" class="sidebar-heading clickable"><span>Git</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/linux/" class="sidebar-link">Linux</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/php/" class="sidebar-heading clickable"><span>PHP</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/symfony/" class="sidebar-heading clickable"><span>Symfony</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/js/" class="sidebar-heading clickable"><span>Javascript</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/lamp/" aria-current="page" class="active sidebar-link">Serveur Lamp</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lamp/#definitions" class="sidebar-link">Définitions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lamp/#serveur" class="sidebar-link">Serveur</a></li><li class="sidebar-sub-header"><a href="/lamp/#apache" class="sidebar-link">Apache</a></li><li class="sidebar-sub-header"><a href="/lamp/#mysql" class="sidebar-link">MySQL</a></li><li class="sidebar-sub-header"><a href="/lamp/#php" class="sidebar-link">PHP</a></li></ul></li><li class="sidebar-sub-header"><a href="/lamp/#installation-et-configuration" class="sidebar-link">Installation et configuration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lamp/#apache-2" class="sidebar-link">Apache</a></li><li class="sidebar-sub-header"><a href="/lamp/#mysql-2" class="sidebar-link">MySQL</a></li><li class="sidebar-sub-header"><a href="/lamp/#php-2" class="sidebar-link">PHP</a></li></ul></li><li class="sidebar-sub-header"><a href="/lamp/#mise-en-ligne-d-un-projet" class="sidebar-link">Mise en ligne d'un projet</a></li></ul></li><li><a href="/deploy/" class="sidebar-link">Déploiement</a></li><li><a href="/docker/" class="sidebar-link">Docker</a></li><li><a href="/ci/" class="sidebar-link">Intégration continue</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="serveur-lamp"><a href="#serveur-lamp" class="header-anchor">#</a> Serveur Lamp</h1> <p>Un serveur <abbr title="Linux Apache MySQL Php">Lamp</abbr> est en réalité un ensemble de 3 programmes :</p> <ul><li>Apache</li> <li>MySQL</li> <li>Php</li></ul> <p>Le <code>L</code> correspond simplement à Linux. Il y a plusieurs moyens d'installer un serveur Lamp, nous allons voir la méthode manuelle, qui vous servira si vous voulez mettre votre site en ligne (en production).</p> <p><img src="http://www-igm.univ-mlv.fr/~dr/XPOSE2003/tomcat/images/serveurappli.jpg" alt=""></p> <p>Explications du schéma ci-dessus (<a href="http://www-igm.univ-mlv.fr/~dr/XPOSE2003/tomcat/images/serveurappli.jpg" target="_blank" rel="noopener noreferrer">source<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>) :</p> <ol><li>le navigateur envoie une requête HTTP, qui arrive sur le serveur web</li> <li>ce dernier reçoit la demande et fait le lien entre la requête et l'un des sites configurés</li> <li>il appelle alors le serveur d'applications (Java, Php, etc.) pour traiter la demande</li> <li>le serveur d'application reçoit la demande et la traite (en appelant sa source de données et d'éventuels d'autres serveurs)</li> <li>le serveur d'application envoie sa réponse au serveur web</li> <li>le serveur web transmet la réponse au navigateur (<em>via</em> une réponse HTTP)</li></ol> <p>On note ici qu'il faut bien distinguer :</p> <ul><li>le serveur (machine hébergeant les sites et les applications)</li> <li>le serveur web ou serveur HTTP (comme Apache)</li> <li>le serveur d'application (comme Php)</li> <li>le serveur de <abbr title="Base de Données">BdD</abbr></li></ul> <h2 id="definitions"><a href="#definitions" class="header-anchor">#</a> Définitions</h2> <p>Les définitions en vidéo :</p> <div style="position:relative;padding-bottom:50.46874999999999%;height:0;"><iframe src="https://www.loom.com/embed/0210a182d2884ab1b0ba999eb6126316" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="allowfullscreen" style="position:absolute;top:0;left:0;width:100%;height:100%;"></iframe></div> <h3 id="serveur"><a href="#serveur" class="header-anchor">#</a> Serveur</h3> <p>Le terme serveur désigne le rôle joué par un appareil matériel destiné à offrir des services à des clients en réseau Internet. (<a href="https://www.journaldunet.fr/web-tech/dictionnaire-du-webmastering/1203337-serveur-informatique-definition-traduction/" target="_blank" rel="noopener noreferrer">source<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>).</p> <p>Nous allons surtout voir 3 types de serveurs : les serveurs web, de <abbr title="Base de Données">BdD</abbr> et d'application</p> <h3 id="apache"><a href="#apache" class="header-anchor">#</a> Apache</h3> <p>Apache est un serveur web, dont le travail est d'attendre les requêtes (HTTP) des utilisateurs pour renvoyer une réponse HTTP (en général, la réponse contient une page HTML). Il est l'un des plus répandus, du fait de son âge, de ses nombreuses fonctionnalités et de sa modularité.</p> <p>C'est ce serveur qui va faire le lien entre l'url demandée et les fichiers (scripts) à exécuter.
Apache est un outil modulaire, permettant de communiquer simplement avec différents serveurs d'application ou différents langages. Il supporte par exemple Php et permet d'appeler très simplement des scripts Php.</p> <p>Sa conception le rend également très aisément configurable, permettant de s'adapter à tous les cas. Je vous conseille de jeter un œil aux fichiers <code>.htaccess</code> d'Apache, permettant d'appliquer une configuration spécifique à un site/dossier.</p> <h4 id="alternatives"><a href="#alternatives" class="header-anchor">#</a> Alternatives</h4> <ul><li>Nginx ( ❤️ )</li> <li>Tomcat (également développé par Apache 😉 )</li></ul> <h3 id="mysql"><a href="#mysql" class="header-anchor">#</a> MySQL</h3> <p>MySQL est un serveur de <abbr title="Base de Données">BdD</abbr>, permettant de stocker et récupérer des données de manière structurée, à l'aide de requêtes <abbr title="Structured Query Language">SQL</abbr>.</p> <h4 id="alternatives-2"><a href="#alternatives-2" class="header-anchor">#</a> Alternatives</h4> <ul><li>MariaDB (version libre et améliorée de MySQL)</li> <li>PostgreSQL (libre et très (très) puissant)</li> <li>Oracle (trop puissant et non libre)</li> <li>De nombreux autres <abbr title="Systèmes de Gestion de Base de Données">SGBD</abbr></li></ul> <h3 id="php"><a href="#php" class="header-anchor">#</a> PHP</h3> <p>Php est plusieurs choses :</p> <ul><li>un programme permettant d'interpréter du Php (lorsqu'on appelle une commande comme <code>php bin/console</code>)</li> <li>un serveur d'application (lorsqu'il est appelé par un serveur web comme Apache ou Nginx)</li></ul> <p>En général, Php se comporte comme un simple interpréteur et est utilisé comme tel par Apache. Lors de l'appel d'une URL, Apache fait le lien avec le fichier <code>.php</code> à exécuter et lance la commande pour l'interpréter.
Il existe toutefois des variantes (comme PHP-fpm) permettant d'utiliser PHP en tant que serveur d'application à part entière. Php-fpm est alors appelé sur un port précis (ou une socket) et attend qu'on lui envoie des informations (requêtes) pour les traiter lui-même. Cette dernière méthode est en général plus rapide et plus efficace.</p> <p>Comme nous l'avons vu avec l'exécutable Symfony, les dernières version de Php fournissent également un serveur web, qui se comporte en fait comme un serveur web <strong>et</strong> un serveur d'application. Je vous invite à lire <a href="https://www.php.net/manual/fr/features.commandline.webserver.php" target="_blank" rel="noopener noreferrer">la documentation sur le serveur web interne de Php<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, en vous rappelant que ça n'est pas viable pour un environnement de production 😉 .</p> <h4 id="les-extensions-php"><a href="#les-extensions-php" class="header-anchor">#</a> Les extensions Php</h4> <p>Certaines fonctionnalités nécessitent d'ajouter ce que l'on appelle des extensions : des librairies liées à Php, non inclues par défaut dans PHP. Pour les installer, cela dépend de votre système :</p> <ul><li>Sur Debian, vous pouvez les installer avec <code>apt</code> ou <code>pecl</code></li> <li>Sur Windows, vous pouvez les installer en téléchargeant les fichiers <code>.dll</code> ou avec <code>pecl</code></li></ul> <h2 id="installation-et-configuration"><a href="#installation-et-configuration" class="header-anchor">#</a> Installation et configuration</h2> <p><a href="https://e-vinrude.drakolab.fr/cookbooks/debianServerInstall.html" target="_blank" rel="noopener noreferrer">La documentation d'installation d'un serveur Debian chez Drakona<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div style="position:relative;padding-bottom:56.25%;height:0;"><iframe src="https://www.loom.com/embed/a3bd18f2737b4c98b9fd93b72d055c42" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="allowfullscreen" style="position:absolute;top:0;left:0;width:100%;height:100%;"></iframe></div> <p>Tout ce qui suit concerne l'installation d'un serveur LAMP sur une machine Linux (Debian ou basée sur Debian). Pour l'installation sur une machine Windows, voir <a href="/php/00-intro.html#environnement-de-travail">l'installation de Wamp dans le cours sur PHP</a>.</p> <h3 id="apache-2"><a href="#apache-2" class="header-anchor">#</a> Apache</h3> <p>La première chose à faire est d'installer Apache. Sur un serveur Debian, on va utiliser la commande :</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> apache2 apache2-utils
</code></pre></div><p>Pour le configurer, on va créer la configuration d'un site dans le dossier <code>/etc/apache2/sites-available/</code>. Le dossier <code>/etc</code> étant en dehors de notre dossier personnel, nous n'avons pas les droits par défaut, et il nous faut utiliser les droits de super utilisateur. Créons par exemple un fichier de configuration pour un site <code>www.example.test</code> :</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">nano</span> /etc/apache2/sites-available/example.test.conf
</code></pre></div><p>Personnellement, je nomme mes configurations en fonction du nom de domaine du site. Il n'y a aucune obligation et le nommage est plutôt libre (le <code>.conf</code> n'est pas vraiment optionnel, par contre 😉 ).</p> <p>À l'intérieur, j'y indique le nom du site et un ou des alias, et le chemin vers mes fichiers :</p> <div class="language-apacheconf extra-class"><pre class="language-apacheconf"><code><span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;</span>VirtualHost</span><span class="token directive-block-parameter attr-value"> *<span class="token punctuation">:</span>80</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment"># On indique l'admin à contacter en cas de soucis (optionnel)</span>
    <span class="token directive-inline property">ServerAdmin</span> contact@example.test
    <span class="token comment"># Le chemin où se trouvent les fichiers visibles du site</span>
    <span class="token directive-inline property">DocumentRoot</span> /var/www/test/public
    <span class="token comment"># Le nom de domaine attendu par défaut</span>
    <span class="token directive-inline property">ServerName</span> www.example.test
    <span class="token comment"># Un second nom de domaine (ou plus) pouvant donner sur ce site (optionnel)</span>
    <span class="token directive-inline property">ServerAlias</span> <span class="token directive-inline property">example</span>.test

    <span class="token comment"># On définit des options et des droits sur le dossier du site</span>
    <span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;</span>Directory</span><span class="token directive-block-parameter attr-value"> /var/www/test/public/</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment"># -Indexes : on n'affiche pas le contenu du dossier si aucun fichier d'index n'est trouvé</span>
        <span class="token comment"># +FollowSymLinks : Si un fichier ou un dossier est un lien symbolique, on le suit</span>
        <span class="token directive-inline property">Options</span> -Indexes +FollowSymLinks
        <span class="token comment"># On permet à un fichier .htaccess de surcharger la configuration</span>
        <span class="token directive-inline property">Allowoverride</span> ALL
        
        <span class="token comment"># Les deux balises suivantes définissent des droits sur le dossier</span>
        <span class="token comment"># selon si le module mod_authz_core.c existe ou non sur ce système</span>
        <span class="token comment"># Dans les deux cas, on accorde toujours le droit de lecture sur les fichiers</span>
        <span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;</span>IfModule</span><span class="token directive-block-parameter attr-value"> mod_authz_core.c</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment"># Apache 2.4</span>
            <span class="token directive-inline property">Require</span> all granted
        <span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;/</span>IfModule</span><span class="token punctuation">&gt;</span></span>
        <span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;</span>IfModule</span><span class="token directive-block-parameter attr-value"> !mod_authz_core.c</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment"># Apache 2.2</span>
            <span class="token directive-inline property">Order</span> <span class="token directive-inline property">deny</span>,allow
            <span class="token directive-inline property">Allow</span> from all
        <span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;/</span>IfModule</span><span class="token punctuation">&gt;</span></span>
    <span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;/</span>Directory</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment"># On récupère les logs d'accès dans le premier fichier</span>
    <span class="token directive-inline property">CustomLog</span> /var/log/apache2/example.test.log vhost_combined
    <span class="token comment"># Et les logs d'erreur dans le second</span>
    <span class="token directive-inline property">ErrorLog</span> /var/log/apache2/example.test.errors.log
<span class="token directive-block tag"><span class="token directive-block tag"><span class="token punctuation">&lt;/</span>VirtualHost</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Une fois votre fichier de configuration prêt, vous pouvez l'activer <strong>et rendre le site disponible</strong> avec la commande :</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> ad2ensite example.test.conf
<span class="token function">sudo</span> <span class="token function">service</span> apache2 restart
</code></pre></div><p>Votre fichier de configuration est alors lié dans le dossier <code>/etc/apache2/sites-enabled/</code> et devient donc disponible dès le redémarrage d'apache.</p> <h3 id="mysql-2"><a href="#mysql-2" class="header-anchor">#</a> MySQL</h3> <p>Pour installer MySQL, on va installer le serveur et le client :</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> mysql-client mysql-server
</code></pre></div><p>Une fois le serveur installé, vous allez devoir le configurer ! Normalement, vous aurez quelques éléments d'installation proposés (version de MySQL principalement). Je vous laisse juge des versions dont vous avez besoin.</p> <p>Une fois MySQL installé, on peut définir un mot de passe d'administrateur (root) avec la commande :</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> mysql_secure_installation
</code></pre></div><p>Une série de questions va alors vous être posées et il peut être utile de dire oui à la plupart (je vous invite à regarder la vidéo d'installation pour plus de détails).</p> <p>En général, il vaut mieux <a href="https://www.digitalocean.com/community/tutorials/how-to-create-a-new-user-and-grant-permissions-in-mysql" target="_blank" rel="noopener noreferrer">créer un utilisateur et lui donner des droits<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> pour mettre à jour une BdD précise, sans avoir accès aux autres. Ainsi, si le mot de passe d'une de vos bases est compromis, les autres restent isolées. Dans un premier temps, se connecter à la console MySQL :</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> mysql -uroot -p
</code></pre></div><p>Puis entrer les commandes suivantes (à adapter selon vos éléments à vous) :</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'votreUtilisateur'</span><span class="token variable">@'localhost'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'motDePasse'</span><span class="token punctuation">;</span>
<span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> uneBdD <span class="token punctuation">.</span> <span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'votreUtilisateur'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>
FLUSH <span class="token keyword">PRIVILEGES</span><span class="token punctuation">;</span>
</code></pre></div><p>Pour plus de détails, je vous conseille la lecture de <a href="https://www.digitalocean.com/community/tutorials/how-to-create-a-new-user-and-grant-permissions-in-mysql" target="_blank" rel="noopener noreferrer">cet article détaillant la création d'un utilisateur et la gestion des droits<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>Votre serveur MySQL devrait être prêt à l'utilisation 😉 .</p> <h3 id="php-2"><a href="#php-2" class="header-anchor">#</a> PHP</h3> <p>Installer Php implique d'installer php et les extensions dont vous avez besoin (ce qui n'est pas toujours simple à déterminer). La commande d'installation suivante installe Php 7.4 et les extensions nécessaires à Symfony (plus quelques optionnelles) :</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php-pear php7.4 php7.4-<span class="token punctuation">{</span>cli,common,curl,dev,fpm,gd,intl,json,mbstring,mysql,readline,xml,zip<span class="token punctuation">}</span>
</code></pre></div><p><code>php7.4-{cli,common}</code> est équivalent à <code>php7.4-cli php7.4-common</code></p> <p>Installer Composer :</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">curl</span> -sS https://getcomposer.org/installer -o composer-setup.php <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> php composer-setup.php --install-dir<span class="token operator">=</span>/usr/local/bin --filename<span class="token operator">=</span>composer <span class="token operator">&amp;&amp;</span> <span class="token function">rm</span> -rf composer-setup.php
</code></pre></div><h2 id="mise-en-ligne-d-un-projet"><a href="#mise-en-ligne-d-un-projet" class="header-anchor">#</a> Mise en ligne d'un projet</h2> <p>Voir <a href="/deploy/">cours de déploiement</a>.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/js/99-revisions.html" class="prev">
        Révisions
      </a></span> <span class="next"><a href="/deploy/">
        Déploiement
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.a0283a3d.js" defer></script><script src="/assets/js/2.2bb1f65b.js" defer></script><script src="/assets/js/33.04577fe2.js" defer></script>
  </body>
</html>
