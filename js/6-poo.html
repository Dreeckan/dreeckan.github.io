<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Programmation orientée objet</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Les formations de Rémi Jarjat pour Human Booster">
    
    <link rel="preload" href="/assets/css/0.styles.f78ef515.css" as="style"><link rel="preload" href="/assets/js/app.a0283a3d.js" as="script"><link rel="preload" href="/assets/js/2.2bb1f65b.js" as="script"><link rel="preload" href="/assets/js/28.c59ffda1.js" as="script"><link rel="prefetch" href="/assets/js/10.a27b6e9d.js"><link rel="prefetch" href="/assets/js/11.2193e9e3.js"><link rel="prefetch" href="/assets/js/12.f39a5b44.js"><link rel="prefetch" href="/assets/js/13.2d6a44aa.js"><link rel="prefetch" href="/assets/js/14.0673e9ad.js"><link rel="prefetch" href="/assets/js/15.a5eeeada.js"><link rel="prefetch" href="/assets/js/16.33dfc880.js"><link rel="prefetch" href="/assets/js/17.c79025e1.js"><link rel="prefetch" href="/assets/js/18.959ecd03.js"><link rel="prefetch" href="/assets/js/19.9b33ed18.js"><link rel="prefetch" href="/assets/js/20.ef228a5b.js"><link rel="prefetch" href="/assets/js/21.95b935c1.js"><link rel="prefetch" href="/assets/js/22.6089ec44.js"><link rel="prefetch" href="/assets/js/23.1786dcbd.js"><link rel="prefetch" href="/assets/js/24.1cc8c701.js"><link rel="prefetch" href="/assets/js/25.bfc350ad.js"><link rel="prefetch" href="/assets/js/26.bc869606.js"><link rel="prefetch" href="/assets/js/27.2974731f.js"><link rel="prefetch" href="/assets/js/29.a4f4f78c.js"><link rel="prefetch" href="/assets/js/3.b306ebdc.js"><link rel="prefetch" href="/assets/js/30.f86e1c24.js"><link rel="prefetch" href="/assets/js/31.3a368f51.js"><link rel="prefetch" href="/assets/js/32.ae32716d.js"><link rel="prefetch" href="/assets/js/33.04577fe2.js"><link rel="prefetch" href="/assets/js/34.0036621d.js"><link rel="prefetch" href="/assets/js/35.ae9cca52.js"><link rel="prefetch" href="/assets/js/36.46328e65.js"><link rel="prefetch" href="/assets/js/37.b265ca29.js"><link rel="prefetch" href="/assets/js/38.30e09b09.js"><link rel="prefetch" href="/assets/js/39.b34ea9f8.js"><link rel="prefetch" href="/assets/js/4.1b3f0ff6.js"><link rel="prefetch" href="/assets/js/40.6ee002ae.js"><link rel="prefetch" href="/assets/js/41.fc420cf4.js"><link rel="prefetch" href="/assets/js/42.209ec249.js"><link rel="prefetch" href="/assets/js/43.2d7d1cd7.js"><link rel="prefetch" href="/assets/js/44.b9fd8430.js"><link rel="prefetch" href="/assets/js/45.15ab68bd.js"><link rel="prefetch" href="/assets/js/46.01b8ec0e.js"><link rel="prefetch" href="/assets/js/47.112cd2f4.js"><link rel="prefetch" href="/assets/js/48.867e58b9.js"><link rel="prefetch" href="/assets/js/49.3ac37d3e.js"><link rel="prefetch" href="/assets/js/5.784f0707.js"><link rel="prefetch" href="/assets/js/50.f9dae8e2.js"><link rel="prefetch" href="/assets/js/51.43768ca2.js"><link rel="prefetch" href="/assets/js/52.dde625a3.js"><link rel="prefetch" href="/assets/js/53.72d8e143.js"><link rel="prefetch" href="/assets/js/54.bc802a1c.js"><link rel="prefetch" href="/assets/js/55.e1f55ab2.js"><link rel="prefetch" href="/assets/js/56.1118b442.js"><link rel="prefetch" href="/assets/js/57.c6e74a85.js"><link rel="prefetch" href="/assets/js/58.cfab71d0.js"><link rel="prefetch" href="/assets/js/59.6fb84388.js"><link rel="prefetch" href="/assets/js/6.a94e70e9.js"><link rel="prefetch" href="/assets/js/60.f130f013.js"><link rel="prefetch" href="/assets/js/61.99515c03.js"><link rel="prefetch" href="/assets/js/62.d3e48f49.js"><link rel="prefetch" href="/assets/js/7.8a7612b0.js"><link rel="prefetch" href="/assets/js/8.82725242.js"><link rel="prefetch" href="/assets/js/9.8e900de4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f78ef515.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/LogoHB.png" alt="" class="logo"> <!----></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">Liste des cours</a></li><li><a href="/general/" class="sidebar-link">Culture numérique</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/git/" class="sidebar-heading clickable"><span>Git</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/linux/" class="sidebar-link">Linux</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/php/" class="sidebar-heading clickable"><span>PHP</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/symfony/" class="sidebar-heading clickable"><span>Symfony</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/js/" class="sidebar-heading clickable router-link-active open"><span>Javascript</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/js/1-bases.html" class="sidebar-link">Les bases du langage</a></li><li><a href="/js/2-logique.html" class="sidebar-link">Manipulation logique</a></li><li><a href="/js/3-dom.html" class="sidebar-link">Le DOM</a></li><li><a href="/js/4-jquery.html" class="sidebar-link">JQuery</a></li><li><a href="/js/5-ajax.html" class="sidebar-link">Ajax</a></li><li><a href="/js/6-poo.html" aria-current="page" class="active sidebar-link">Programmation orientée objet</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/6-poo.html#pourquoi-la-poo" class="sidebar-link">Pourquoi la POO ?</a></li><li class="sidebar-sub-header"><a href="/js/6-poo.html#mise-en-pratique" class="sidebar-link">Mise en pratique</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/6-poo.html#creer-une-classe-et-des-objets" class="sidebar-link">Créer une classe et des objets</a></li><li class="sidebar-sub-header"><a href="/js/6-poo.html#constructeur-et-proprietes" class="sidebar-link">Constructeur et propriétés</a></li><li class="sidebar-sub-header"><a href="/js/6-poo.html#les-methodes" class="sidebar-link">Les méthodes</a></li><li class="sidebar-sub-header"><a href="/js/6-poo.html#le-mot-cle-this" class="sidebar-link">Le mot-clé this</a></li></ul></li><li class="sidebar-sub-header"><a href="/js/6-poo.html#exercices" class="sidebar-link">Exercices</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/6-poo.html#conception-et-utilisation-de-classes" class="sidebar-link">Conception et utilisation de classes</a></li></ul></li></ul></li><li><a href="/js/90-webpack.html" class="sidebar-link">Webpack</a></li><li><a href="/js/98-outils.html" class="sidebar-link">Outils utiles</a></li><li><a href="/js/99-revisions.html" class="sidebar-link">Révisions</a></li></ul></section></li><li><a href="/lamp/" class="sidebar-link">Serveur Lamp</a></li><li><a href="/deploy/" class="sidebar-link">Déploiement</a></li><li><a href="/docker/" class="sidebar-link">Docker</a></li><li><a href="/ci/" class="sidebar-link">Intégration continue</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="programmation-orientee-objet"><a href="#programmation-orientee-objet" class="header-anchor">#</a> Programmation orientée objet</h1> <p>Jusqu'ici, nous avons codé nos programmes de manière procédurale. C'est-à-dire que le code se trouve dans l'ordre de son exécution (le code est exécuté ligne par ligne). En POO (Programmation Orientée Objet), tout s'articule autour de la notions d'objets : des éléments indépendants ayant leurs caractéristiques (appelées propriétés) et leurs fonctionnalités (
appelées méthodes).</p> <h2 id="pourquoi-la-poo"><a href="#pourquoi-la-poo" class="header-anchor">#</a> Pourquoi la POO ?</h2> <p>La programmation orientée objet permet plusieurs choses :</p> <ul><li>une plus grande flexibilité du code (modifier une classe permet de modifier le comportement de tous les objets d'un coup)</li> <li>une meilleure lisibilité (un objet regroupe toutes les caractéristiques et les fonctionnalités dont il a besoin)</li> <li>une meilleure maintenabilité (pas besoin de copier-coller des éléments à plusieurs endroits du code et la logique est plus facile à retrouver)</li></ul> <h2 id="mise-en-pratique"><a href="#mise-en-pratique" class="header-anchor">#</a> Mise en pratique</h2> <p>Dans certains exercices de ce cours, j'ai utilisé ce qu'on appelle des objets littéraux. Un exemple d'<strong>objet littéral</strong>, qui va nous servir d'exemple pour la suite :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> player <span class="token operator">=</span> <span class="token punctuation">{</span>
    hp<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token comment">// On a ici une propriété de notre objet</span>
    name<span class="token operator">:</span> <span class="token string">'Dreeckan'</span><span class="token punctuation">,</span>
    strength<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    defense<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token function-variable function">isAlive</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// Et ici une méthode</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>hp <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="creer-une-classe-et-des-objets"><a href="#creer-une-classe-et-des-objets" class="header-anchor">#</a> Créer une classe et des objets</h3> <p>Maintenant, si nous voulons créer d'autres objets <code>Player</code>, basés sur le même modèle, nous pouvons créer une <strong>classe</strong>, un <strong>plan de fabrication</strong> pour des objets. Pour définir cette classe, commençons par l'essentiel : son nom. On l'écrit en <code>PascalCase</code> (c’est-à-dire sans espace entre les mots, avec une majuscule à chaque mot).</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Définition d'une classe</span>
<span class="token keyword">class</span> <span class="token class-name">Player</span> <span class="token punctuation">{</span>
    <span class="token comment">// Ici, nous ajouterons nos propriétés et méthodes</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Une fois que nous avons notre classe, nous pouvons créer des objets (on parle d'instances de la classe <code>Player</code>) à partir de ce plan de fabrication. Pour le faire, nous allons utiliser le mot-clé <code>new</code> :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> player1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> player2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="constructeur-et-proprietes"><a href="#constructeur-et-proprietes" class="header-anchor">#</a> Constructeur et propriétés</h3> <p>Les propriétés sont les caractéristiques de notre objet. Dans le cas de notre <code>Player</code>, cela peut être :</p> <ul><li>ses points de vie,</li> <li>son nom,</li> <li>sa force,</li> <li>sa défense,</li> <li>toute autre caractéristique qui nous permettrait de le définir pour notre programme...</li></ul> <p>Nous pouvons définir ce qu'il se passe lors de l'appel de ce <code>new</code> et, si on le souhaite, lui donner des paramètres. Pour cela, nous ajoutons une méthode spéciale, <strong>le constructeur</strong>. Cette méthode est appelée <strong>automatiquement</strong> dès que l'on crée un nouvel objet avec <code>new</code>.</p> <p>Attention, il ne faut pas confondre une propriété et une variable. Une propriété est toujours précédée d'un objet (ou de <code>this</code>) et ne peut être appelée sans.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Un exemple de constructeur pour notre objet Player, sans paramètres</span>

<span class="token keyword">class</span> <span class="token class-name">Player</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Ici this équivaut à demande l'objet Player en cours (celui qu'on a créé/instancié avec new)</span>
        <span class="token comment">// On définit des propriétés et des valeurs par défaut</span>
        <span class="token comment">// et on peut alors donner n'importe quelle valeurs à nos propriétés</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hp <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>strength <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>defense <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Si on fait un new, sans paramètre, les propriétés sont bien définies et contiennent les valeurs demandées</span>
<span class="token keyword">let</span> player1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// On peut accéder à une propriété de la même manière que nous l'avons vu avec les objets littéraux</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>player1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Affiche Player {name: &quot;&quot;, hp: 100, strength:5, defense: 10}</span>

<span class="token comment">// On peut aussi accéder aux propriétés ou les modifier</span>
player1<span class="token punctuation">.</span>hp <span class="token operator">=</span> <span class="token number">110</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>player1<span class="token punctuation">.</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Affiche 110</span>
</code></pre></div><p>Pour pouvoir créer un objet avec des valeurs, on donne des paramètres au constructeur :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Un exemple de constructeur pour notre objet Player, avec des paramètres</span>
<span class="token comment">// Les 3 derniers ont des valeurs par défaut </span>
<span class="token comment">// (si on ne leur donne pas de valeur, ils prennent leur valeur par défaut)</span>

<span class="token keyword">class</span> <span class="token class-name">Player</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> hp <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> strength <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> defense <span class="token operator">=</span> <span class="token number">10</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Attention à ne pas confondre this.name et name</span>
        <span class="token comment">// La première est une propriété de l'objet Player qu'on instancie</span>
        <span class="token comment">// La seconde est une variable : le paramètre du constructeur</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hp <span class="token operator">=</span> hp<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>strength <span class="token operator">=</span> strength<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>defense <span class="token operator">=</span> defense<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Si on fait un new, sans paramètre, les propriétés sont bien définies et contiennent les valeurs demandées</span>
<span class="token keyword">let</span> player2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token string">'Test'</span><span class="token punctuation">,</span> <span class="token number">125</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>player2<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Affiche &quot;Test&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>player2<span class="token punctuation">.</span>strength<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Affiche 11</span>
<span class="token comment">// ...</span>

</code></pre></div><h3 id="les-methodes"><a href="#les-methodes" class="header-anchor">#</a> Les méthodes</h3> <p>Les méthodes correspondent aux capacités ou aux actions que peut réaliser notre objet, c'est une fonction, dans une classe, même si elle ne porte pas le mot-clé <code>function</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Player</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> hp <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> strength <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> defense <span class="token operator">=</span> <span class="token number">10</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hp <span class="token operator">=</span> hp<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>strength <span class="token operator">=</span> strength<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>defense <span class="token operator">=</span> defense<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Notre Player sait s'il est en vie. C'est utile à notre programme ;) .</span>
    <span class="token function">isAlive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>hp <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Une méthode peut également avoir des paramètres, </span>
    <span class="token comment">// comme n'importe quelle fonction</span>
    <span class="token function">isStrongerThan</span><span class="token punctuation">(</span><span class="token parameter">strengthToCompare</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Strength <span class="token operator">&gt;</span> strengthToCompare<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Une méthode nous permet de réaliser divers calculs,</span>
    <span class="token comment">// et contenir la logique de notre objet.</span>
    <span class="token comment">// Ici, on peut dire ce qu'il se passe quand notre joueur prend un coup</span>
    <span class="token function">takeHit</span><span class="token punctuation">(</span><span class="token parameter">strength</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> damage <span class="token operator">=</span> strength <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>defense<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>damage <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>hp <span class="token operator">-=</span> damage<span class="token punctuation">;</span>

            <span class="token keyword">return</span> damage<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">attack</span><span class="token punctuation">(</span><span class="token parameter">otherPlayer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// On peut utiliser les méthodes d'un autre objet Player, </span>
        <span class="token comment">// s'il est passé en paramètre</span>
        <span class="token keyword">let</span> damageDealt <span class="token operator">=</span> otherPlayer<span class="token punctuation">.</span><span class="token function">takeHit</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>strength<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> damageDealt<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Un petit exemple de programme, utilisant notre objet <code>Player</code> précédent :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Un premier joueur, avec toutes les valeurs par défaut</span>
<span class="token keyword">let</span> player1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token string">'Joueur1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Un second joueur, dont on définit les propriétés à l'aide du constructeur</span>
<span class="token keyword">let</span> player2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token string">'Joueur2'</span><span class="token punctuation">,</span> <span class="token number">125</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> damage <span class="token operator">=</span> player1<span class="token punctuation">.</span><span class="token function">attack</span><span class="token punctuation">(</span>player2<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>player1<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">' inflige '</span> <span class="token operator">+</span> damage <span class="token operator">+</span> <span class="token string">' points de dégats à '</span> <span class="token operator">+</span> player2<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="setters"><a href="#setters" class="header-anchor">#</a> Setters</h4> <p>Dans beaucoup de langages de programmation, vous entendrez parler de méthodes dites <code>setters</code>. Il s'agit de méthodes permettant de manipuler une propriété d'un objet. Idéalement, pour mettre à jour une propriété, il faut passer par un <code>setter</code>. L'intérêt est de pouvoir appliquer des traitements (mettre du texte en majuscule, modifier une autre propriété en même temps, etc.) dès que l'on souhaite mettre à jour la propriété.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Player</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">hp <span class="token operator">=</span> <span class="token number">100</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setHp</span><span class="token punctuation">(</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// On appelle notre setter dès le constructeur</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">setHp</span><span class="token punctuation">(</span><span class="token parameter">hp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Notre setter va nous permettre d'ajouter une vérification</span>
        <span class="token comment">// Ici, notre joueur ne peut pas avoir plus de 100 points de vie</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>hp <span class="token operator">&gt;</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            hp <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hp <span class="token operator">=</span> hp<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="le-mot-cle-this"><a href="#le-mot-cle-this" class="header-anchor">#</a> Le mot-clé this</h3> <p>Dans les méthodes de vos classes, vous pouvez renvoyer la valeur de l'objet (l'instance) avec le mot-clé <code>this</code>. C'est ce que l'on fait dans le constructeur et différentes méthodes.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Player</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">hp <span class="token operator">=</span> <span class="token number">100</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Ici this vaut l'objet en cours (peut être la valeur contenue dans player1 ou dans player2, par exemple)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hp <span class="token operator">=</span> hp<span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> player1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> player2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>⚠️ Attention toutefois au contexte des variables ! Dans une fonction anonyme, <code>this</code> va avoir une autre valeur.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">tests <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        tests<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">test</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>something <span class="token operator">=</span> test<span class="token punctuation">;</span> <span class="token comment">// Ici, this ne correspond pas à notre objet !</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Pour éviter ce problème :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">tests <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        tests<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">test</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>something <span class="token operator">=</span> test<span class="token punctuation">;</span> <span class="token comment">// Avec une fonction fléchée, this correspond bien à notre objet</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// Une autre solution : on déclare une variable intermédiaire qu'on utilisera dans la fonction</span>
        <span class="token keyword">let</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        
        tests<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">test</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            self<span class="token punctuation">.</span>something <span class="token operator">=</span> test<span class="token punctuation">;</span> <span class="token comment">// On utilise notre variable intermédiaire pour contourner le problème</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// Vous pouvez également utiliser .bind(), comme indiqué dans la première partie du cours ;)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="exercices"><a href="#exercices" class="header-anchor">#</a> Exercices</h2> <h3 id="conception-et-utilisation-de-classes"><a href="#conception-et-utilisation-de-classes" class="header-anchor">#</a> Conception et utilisation de classes</h3> <p>Nous allons créer deux classes <code>Book</code> et <code>Author</code> pour représenter des livres et leurs auteurs.</p> <p>Pour cet exercice, vous allez également avoir besoin de <a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noopener noreferrer">l'objet Date de Javascript<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, dont vous pourrez également trouver <a href="/js/98-outils.html">des exemples dans le cours</a>.</p> <p>Nous allons créer un fichier par classe : <code>Book.js</code> et <code>Author.js</code>. Ne pas oublier d'inclure ces deux fichiers dans votre HTML :</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Book.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Les propriétés d'un livre :</p> <ul><li>un ISBN (chaine de caractères)</li> <li>un titre</li> <li>un ou des auteurs (tableau d'objets <code>Author</code>)</li> <li>une date de parution (objet <code>Date</code>)</li> <li>un résumé (4ème de couverture)</li></ul> <p>Les propriétés d'un auteur :</p> <ul><li>un prénom</li> <li>un nom</li> <li>un ou des livres (tableau d'objets <code>Book</code>)</li> <li>une date de naissance (objet <code>Date</code>)</li></ul> <p>Créer au moins 2 instances de chacun de ces objets (<a href="https://www.babelio.com/decouvrir.php?p=2" target="_blank" rel="noopener noreferrer">Si vous avez besoin d'inspiration<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/js/5-ajax.html" class="prev">
        Ajax
      </a></span> <span class="next"><a href="/js/90-webpack.html">
        Webpack
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.a0283a3d.js" defer></script><script src="/assets/js/2.2bb1f65b.js" defer></script><script src="/assets/js/28.c59ffda1.js" defer></script>
  </body>
</html>
